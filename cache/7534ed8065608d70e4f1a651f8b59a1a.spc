a:4:{s:5:"child";a:1:{s:0:"";a:1:{s:3:"rss";a:1:{i:0;a:6:{s:4:"data";s:3:"


";s:7:"attribs";a:1:{s:0:"";a:1:{s:7:"version";s:3:"2.0";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";s:5:"child";a:1:{s:0:"";a:1:{s:7:"channel";a:1:{i:0;a:6:{s:4:"data";s:51:"
	
	
	
	
	
	
	
	
	
			
		
		
		
		
		
		
		
		
		
	";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";s:5:"child";a:4:{s:0:"";a:7:{s:5:"title";a:1:{i:0;a:5:{s:4:"data";s:12:"Tutorialzine";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"link";a:1:{i:0;a:5:{s:4:"data";s:23:"http://tutorialzine.com";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:11:"description";a:1:{i:0;a:5:{s:4:"data";s:54:"PHP MySQL jQuery CSS Tutorials, Resources and Freebies";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:13:"lastBuildDate";a:1:{i:0;a:5:{s:4:"data";s:31:"Sun, 08 Nov 2009 18:09:31 +0000";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:9:"generator";a:1:{i:0;a:5:{s:4:"data";s:29:"http://wordpress.org/?v=2.8.4";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"language";a:1:{i:0;a:5:{s:4:"data";s:2:"en";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"item";a:10:{i:0;a:6:{s:4:"data";s:47:"
		
		
		
		
		
				
		
		

		
		
			
			
		
		";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";s:5:"child";a:6:{s:0:"";a:7:{s:5:"title";a:1:{i:0;a:5:{s:4:"data";s:31:"A Twitter List Powered Fan Page";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"link";a:1:{i:0;a:5:{s:4:"data";s:59:"http://feedproxy.google.com/~r/Tutorialzine/~3/i_bJMljQEHE/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"comments";a:1:{i:0;a:5:{s:4:"data";s:67:"http://tutorialzine.com/2009/11/twitter-list-ajax-fanpage/#comments";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:7:"pubDate";a:1:{i:0;a:5:{s:4:"data";s:31:"Sat, 07 Nov 2009 12:48:21 +0000";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"category";a:3:{i:0;a:5:{s:4:"data";s:3:"CSS";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:1;a:5:{s:4:"data";s:3:"PHP";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:2;a:5:{s:4:"data";s:6:"jQuery";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"guid";a:1:{i:0;a:5:{s:4:"data";s:30:"http://tutorialzine.com/?p=494";s:7:"attribs";a:1:{s:0:"";a:1:{s:11:"isPermaLink";s:5:"false";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:11:"description";a:1:{i:0;a:5:{s:4:"data";s:183:"We are using the Twitter API and the newly released lists, to create a fan page widget that allows your visitors to include themselves in a specially crafted fan list in your account.";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:32:"http://purl.org/dc/elements/1.1/";a:1:{s:7:"creator";a:1:{i:0;a:5:{s:4:"data";s:6:"Martin";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:40:"http://purl.org/rss/1.0/modules/content/";a:1:{s:7:"encoded";a:1:{i:0;a:5:{s:4:"data";s:18408:"<h3>Introduction</h3>
<p>Recently, Twitter rolled out a great new feature on their site &#8211; lists. You can now create and compile a list of twitter users and make it easier for others to follow all at once.</p>
<p>Also, at the same time, they expanded their API to include list management functionality. This allows us to  use these new tools to create a widget that flips lists the other way around &#8211; a fan page you can put in your sidebar, that allows your visitors to fill in their twitter name and join a specially crafted fan list in your twitter account.</p>
<p>So download the example files and lets start coding!</p>
<h3>Step 1 &#8211; XHTML</h3>
<p>As usual, we start with the XHTML. As the widget is entirely AJAX based, this is the only code that you will need to include directly into your site. The rest is fetched asynchronously.</p>
<h4>demo.html</h4>
<pre class="brush:html">&lt;div id="fanPage"&gt;

&lt;div class="title"&gt;

&lt;a class="fanPageLink" href="http://twitter.com" title="Go to fanpage!"&gt;&lt;img src="img/twitter-bird.png" id="twitBird" alt="twitter bird" /&gt;&lt;/a&gt;
&lt;a class="fanPageLink" href="http://twitter.com" title="Go to fanpage!"&gt;Fanpage&lt;/a&gt;

&lt;/div&gt;

&lt;div class="content"&gt;
&lt;div class="fans"&gt;&lt;img src="img/loader.gif" alt="loading.." /&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;div class="subscribe"&gt;
&lt;a href="#" class="joinFP"&gt;Join!&lt;/a&gt;

&lt;div class="membersCount"&gt;
&lt;a class="fanPageLink" id="counter" href="http://twitter.com" title="Total Fans"&gt;&lt;/a&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;</pre>
<p>Here we have the main <strong>fanPage</strong> container DIV, which holds our the widget and inside it we have the <strong>title</strong>, <strong>content</strong> and <strong>subscribe</strong> DIVs.</p>
<p>These are later styled with CSS and populated with data via AJAX. Also notice that we have three links which share a <strong>FanPageLink</strong> class. Currently they point to the twitter&#8217;s main site, but later we are going to edit their <strong>href</strong> attributes dynamically, and point them to the member page of the list.</p>
<div id="attachment_497" class="wp-caption alignnone" style="width: 610px"><img class="size-full wp-image-497" title="A jQuery Twitter List Powered Fanpage Widget" src="http://tutorialzine.com/wp-content/uploads/2009/11/i21.jpg" alt="A jQuery Twitter List Powered Fanpage Widget" width="600" height="230" /><p class="wp-caption-text">A jQuery Twitter List Powered Fanpage Widget</p></div>
<h3>Step 2 &#8211; CSS</h3>
<p>Once we have the markup in place, we can move to the CSS. Here are only presented the rules that are directly used by the widget. You can view all of the code in demo.css in the source archive.</p>
<h4>demo.css</h4>
<pre class="brush:css">#fanPage{
	/* This is the container that holds the widget */
	background-color:#002233;
	color:white;
	height:300px;
	margin:30px auto;
	padding:10px;
	text-align:left;
	width:170px;
}

#fanPage a, #fanPage a:visited{
	/* This styles the title and total fans links */
	color:white;
	text-decoration:none;
}

#fanPage a:hover{
	text-decoration:underline;
}

.title{
	/* The title on the top */
	background-color:#013853;
	font-family:"Myriad Pro",Arial,Helvetica,sans-serif;
	font-size:16px;
	letter-spacing:1px;
	margin:3px 0 10px;
	padding:4px 8px;
	position:relative;
	text-align:right;
	text-transform:uppercase;
}

#twitBird{
	/* The twitter icon on the top */
	left:-10px;
	position:absolute;
	top:-28px;
}

.content{
	/* The div that holds the twitter avatars */
	background-color:#eeeeee;
	padding:6px;
	text-align:left;
	height:208px;
	position:relative;
	color:#333333;
}

#mask{
	/* Inserted once you click the green "Join" button */
	font-size:10px;
	left:0;
	padding:10px;
	position:absolute;
	top:0;
}

#mask label{
	display:block;
	font-weight:bold;
	margin:8px 0 4px;
	text-transform:uppercase;
}

#twitterName{
	/* The twitter name input box */
	background-color:#FCFCFC;
	border:1px solid #CCCCCC;
	color:#333333;
	font-family:Arial,Helvetica,sans-serif;
	font-size:12px;
	padding:2px;
}

#mask a.greyButton,#mask a.greyButton:visited{
	/* The default state of the gray join button */
	display:inline-block;
	height:19px;
	margin-top:10px;
	padding:6px 0 0;
	text-align:center;
	width:70px;
	background:url(img/button_gray.png) no-repeat;
	color:#222222;
}

#mask a.greyButton:hover{
	/* The hover effect on the "Join" button */
	background-position:bottom left;
	text-decoration:none;
}

div#mask a, div#mask a:hover, div#mask a:visited{
	color:#0196e3;
}

#response{
	/* The div that holds the response messages in the "Join area" */
	margin-top:10px;
	font-size:10px;
	text-align:center;
}

.subscribe{
	position:relative;
}

.membersCount{
	/* The total number of fans div */
	position:absolute;
	right:0;
	top:5px;
	color:white;
	display:block;
	font-size:22px;
	font-weight:bold;
}

.content img{
	/* The twitter avatars */
	margin:2px;
}

#fanPage, .content, .title{
	/* Rounding three elements at once */
	-moz-border-radius:4px;
	-webkit-border-radius:4px;
	border-radius:4px;
}

a.joinFP, a.joinFP:hover{
	/* The green "Join" button */
	display:block;
	background:url(img/buttons.png) no-repeat;
	width:94px;
	height:38px;
	text-indent:-9999px;
	margin:5px 0 0 -4px;
}

a.joinFP:hover{
	/* The hover state of the button */
	background-position:bottom left;
}

a img{
	border:none;
}</pre>
<p>Nothing ground-braking here. Notice how we&#8217;ve set up CSS rounded corner rules to three types of elements at once (<strong>line 127</strong>). This way we make it easier to edit the roundness of the widget easier (it would be even better if all the browsers supported border-radius directly, and didn&#8217;t need vendor-specific code).</p>
<p>Also you can see a demonstration of the technique I used to make the hover buttons below.</p>
<div id="attachment_498" class="wp-caption alignnone" style="width: 610px"><img class="size-full wp-image-498" title="Converting a hyperlink into a button with a hover effect" src="http://tutorialzine.com/wp-content/uploads/2009/11/i3.png" alt="Converting a hyperlink into a button with a hover effect" width="600" height="230" /><p class="wp-caption-text">Converting a hyperlink into a button with a hover effect</p></div>
<h3>Step 3 &#8211; jQuery</h3>
<p>As I mentioned earlier, the entire widget is AJAX based. This is actually a necessity, because communication with the twitter API would stall the website otherwise.</p>
<p>Here is the main idea behind the code below:</p>
<ol>
<li>The page, in which the widget is included is loaded into a visitor&#8217;s browser;</li>
<li>With it, <strong>script.js</strong> (which holds all of our jQuery code) is executed;</li>
<li><strong>$(document).ready()</strong> is run;</li>
<li>An AJAX request is initiated, which loads the data from load.php and displays it on success;</li>
<li>All the links with a <strong>fanPageLink</strong> class are pointed to the list members page on twitter;</li>
<li>A click function is bonded to the green join button;</li>
</ol>
<h4>First half of script.js</h4>
<pre class="brush:js">$(document).ready(function(){
	/* Executed on DOM load */

	$.getJSON("load.php",function(data){

		/* Loading the widget data */
		if(data.error)
		{
			/* If there is an error, output and exit */
			$(".content").html(data.error);
			return false;
		}

		$(".content .fans").html('');
		/* Remove the rotating GIF */

		$.each(data.members,function(i,val){

			/* Loop through all the shown members and add them to the .content DIV */
			$(".content .fans").append('&lt;a href="http://twitter.com/'+i+'" target="_blank"&gt;&lt;img src="'+val+'" width="48" height="48" title="'+i+'" alt="'+i+'" /&gt;&lt;/a&gt;');
		});

		$('#counter').html(data.membersCount);
		/* Set the member counter */

		$('.fanPageLink').attr('href',data.fanPage+'/members').attr('target','_blank');
		/* Set the .fanPageLink-s to point to the profile page */
	});

	$('.joinFP').click(function(e){

		/* IF the green button has been clicked.. */

		if($('.content').html().indexOf('id="mask"')!=-1)
		{
			/* ..and the form is already shown exit */
			e.preventDefault();
			return false;
		}

		/* ..in the other case, start a fade out effect */
		$(".content .fans").fadeOut("slow",function(){

			$('.content').append('&lt;div id="mask"&gt;\
			To join our fan page, you just have to fill in your name\
			&lt;label&gt;Twitter username:&lt;/label&gt;\
			&lt;input id="twitterName" name="twitter" type="text" size="20" /&gt;\
			&lt;a href="" class="greyButton" onclick="sendData();return false;"&gt;Join!&lt;/a&gt; or &lt;a href="#" onclick="cancel();return false;"&gt;cancel&lt;/a&gt;\
			&lt;div id="response"&gt;&lt;/div&gt;\
			&lt;/div&gt;');
		});

		/* Prevent the link from redirecting the page */
		e.preventDefault();
	});
});</pre>
<p>Later if a click occurs on the green  &#8220;Join&#8221; button, the avatars are faded out and a form appears on their place.</p>
<p>The second half of the code handles the sending of the data to <strong>add.php</strong>:</p>
<h4>Second half of script.js</h4>
<pre class="brush:js">function sendData()
{
	/* This function sends the form via AJAX */
	$('#response').html('&lt;img src="img/loader.gif" /&gt;');
	var twitter = $('#twitterName').val();
	if(!twitter.length)
	{
		$('#response').html('&lt;span style="color:red"&gt;Please fill in your twitter username.&lt;/span&gt;');
		return false;
	}

	$.ajax({
		type: "POST",
		url: "add.php",
		data: "twitter="+encodeURIComponent(twitter),
		/* Sending the filled in twitter name */
		success: function(msg){

			/* PHP returns 1 on success, and 0 on error */
			var status = parseInt(msg);

			if(status)
			{
				$('#response').html('Thank you for being a fan! You will be added in a few minutes. &lt;a href="#" onclick="cancel();return false"&gt;Hide this form&lt;/a&gt;.');
				$('#twitterName').val('');
			}
			else
				$('#response').html('&lt;span style="color:red"&gt;There is no such twitter user.&lt;/span&gt;');
		}
	});
}

function cancel()
{
	/* Hides the "Join" form */
	$('#mask').remove();
	$('.content .fans').fadeIn('slow');
}</pre>
<p>The sendData function is called if the user clicks on the newly created gray &#8220;Join&#8221; button below the input field. It also checks the return status of the AJAX request to choose the proper status message.</p>
<p>Also remember that for above code the work, we need to include the jQuery library and <strong>script.js</strong> into the head section of the document:</p>
<pre class="brush:html">&lt;script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="script.js"&gt;&lt;/script&gt;</pre>
<h3>Step 4 &#8211; PHP</h3>
<p>Now that we followed all the code on the front-end, it is now time for the last part of this tutorial &#8211; the PHP back-end.</p>
<p>PHP has the important task of communicating with the twitter API. This is done via a special extension &#8211; <strong>CURL</strong>. For convenience, I made a special function &#8211; <strong>curlMe</strong> that wraps the CURL code and makes it easier to send requests from other places in the script.</p>
<h4>functions.php</h4>
<pre class="brush:php">function error($msg)
{
	// Format the error as a JSON object and exit the script:
	die('{error:"'.$msg.'"}');
}

function fetchElement($element,$src)
{
	// Takes in an XML document as string $src, and returns the required nod value

	$match = array();
	preg_match_all('/&lt;'.$element.'&gt;(.*)&lt;\/'.$element.'&gt;/u',$src,$match);
	// Matching the required property in the xml

	return $match[1];

	// ..and returning it
}

function curlMe($url,$gp='')
{
	// Using CURL to communicate with the Twitter API

	global $username,$password;

	$cc = curl_init();

	curl_setopt($cc, CURLOPT_URL, $url);

	if($gp)
	{
		// If the $gp parameter is set, send it by a POST request:
		curl_setopt($cc, CURLOPT_POST, 1);
		curl_setopt($cc, CURLOPT_POSTFIELDS, $gp);
	}
	else
		curl_setopt($cc, CURLOPT_GET, 1);

	curl_setopt($cc, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);
	curl_setopt($cc, CURLOPT_USERPWD, $username.':'.$password);
	curl_setopt($cc, CURLOPT_SSL_VERIFYPEER, false);
	curl_setopt($cc, CURLOPT_RETURNTRANSFER, 1);

	$xml = curl_exec($cc);
	curl_close($cc);

	return $xml;
}</pre>
<p>Now that we&#8217;ve defined those functions, we can use them in any PHP file by just including or requiring <strong>functions.php</strong> in the script.</p>
<p>Adding new fans on the list is done in <strong>add.php</strong></p>
<h4>add.php</h4>
<pre class="brush:php">require "functions.php";
require "config.php";

if(!$_POST['twitter'])
die('0');

$userXML = curlMe("http://twitter.com/users/show.xml?screen_name=".urlencode($_POST['twitter']));
// Initiating an API request

if(strpos($userXML,'&lt;error&gt;Not found&lt;/error&gt;') !== false)
{
	// If there is no such user, return an error:
	die('0');
}

// fetchElement returns an array, and the list function assigns its first element to $id:
list($id) = fetchElement('id',$userXML);

curlMe('http://api.twitter.com/1/'.$username.'/'.$list.'/members.xml','id='.$id);

echo 1;</pre>
<p>As with any API, there are limits of usage. This is done to prevent abuse of the service and ruining everybody&#8217;s day. Twitter enforces a 150 requests per hour rule, which limits how many times we can GET data for the twitter list.</p>
<p>This is why I build a simple caching mechanism, that stores the fetched data for 15 minutes after a request is made to the API.</p>
<p>Here is how it works:</p>
<ol>
<li>When the widget makes an AJAX request to <strong>load.php</strong>;</li>
<li>The php script checks to see if a cache file exists;</li>
<li>If it does, it gets its contents and returns it;</li>
<li>If it does not, or if the cache is older than 15 minutes, it fetches the data from the API, stores it in the cache file for later use and returns it;</li>
</ol>
<p>This simple mechanism ensures that the widget will always have API calls to spare. You can see the code below:</p>
<h4>load.php</h4>
<pre class="brush:php">require "functions.php";
require "config.php";

$cache_file = 'twitter.cache';
// The cache file

$cache_expire_time = 15*60;
// The cache expires after 15 minutes

$twitterers_shown = 12;

// If you are making changes and want to destroy the cache while testing,
// uncomment the line below:

//$cache_expire_time = 1;

if(!file_exists($cache_file) || time() - filemtime($cache_file) &gt; $cache_expire_time)
{
	// If there isn't a cache file, or if it is older than allowed

	$xml = curlMe("http://api.twitter.com/1/".$username."/".$list."/members.xml");
	//$xml = curlMe("http://api.twitter.com/1/chouka/design/members.xml");

	if(strpos($xml,'&lt;error&gt;Not found&lt;/error&gt;') !== false)
	{
		// If there is not such a list, create it automatically:
		curlMe('http://api.twitter.com/1/'.$username.'/lists.xml','name='.$list);
	}

	$usernames = fetchElement('screen_name',$xml);
	$avatars = fetchElement('profile_image_url',$xml);

	$json = '';
	foreach($usernames as $k=&gt;$u)
	{
		if($k!=0) $json.=', ';
		$json.='"'.$u.'":"'.$avatars[$k].'"';
		// Generating the json object with a structure: username:avatar_image

		if($k&gt;=$twitterers_shown-1) break;
	}

	// Getting the total number of fans requires an additional API call:

	$membersXML = curlMe("http://api.twitter.com/1/".$username."/lists/".$list.".xml");
	$membersCount = fetchElement('member_count',$membersXML);

	$json = '{members:{'.$json.'}, membersCount:'.$membersCount[0].',fanPage:"http://twitter.com/'.$username.'/'.$list.'"}';

	// Save the generated json variable in the cache for later use:
	$fp = fopen($cache_file,'w');

	if($fp == false)
	{
		error("Your cache file could not be created! You have to chmod the script directory to 777!");
	}

	fwrite($fp,$json);
	fclose($fp);
}
else
{
	$json = file_get_contents($cache_file);
	// Fetch the data from the cache file
}

echo $json;</pre>
<p>Also you might notice that the API requires you to provide you username and password in order to use it. So if you are planning to run the demo on your own server, be sure to fill in your log-in information in <strong>config.php</strong>.</p>
<div id="attachment_499" class="wp-caption alignnone" style="width: 610px"><img class="size-full wp-image-499" title="The two states" src="http://tutorialzine.com/wp-content/uploads/2009/11/i11.jpg" alt="The two states" width="600" height="460" /><p class="wp-caption-text">The two states</p></div>
<p>With this our Twitter List Powered Fan Page is complete!</p>
<h3>Conclusion</h3>
<p>Today we learned how to use the newly-released twitter lists and the REST API to create a community driven fan page.</p>
<p>You are free to modify the code and use it in your own sites.</p>
<div><table border=0 bgcolor=#ffffff> <td><iframe src='http://digg.com/api/diggthis.php?w=new&amp;u=http%3A%2F%2Ftutorialzine.com%2F2009%2F11%2Ftwitter-list-ajax-fanpage%2F&amp;t=A+Twitter+List+Powered+Fan+Page&amp;s=normal' height='80' width='52' frameborder='0' scrolling='no'></iframe></td> <td><iframe src='http://www.reddit.com/button_content?newwindow=1&amp;url=http%3A%2F%2Ftutorialzine.com%2F2009%2F11%2Ftwitter-list-ajax-fanpage%2F&amp;title=A+Twitter+List+Powered+Fan+Page&amp;t=2 ' height='80' width='52' scrolling='no' frameborder='0' ></iframe></td> <td><iframe src='http://widgets.dzone.com/links/widgets/zoneit.html?url=http%3A%2F%2Ftutorialzine.com%2F2009%2F11%2Ftwitter-list-ajax-fanpage%2F&amp;title=A+Twitter+List+Powered+Fan+Page&amp;t=1 ' height='80' width='52' scrolling='no' frameborder='0' ></iframe></td> <td><iframe src='http://api.tweetmeme.com/button.js?url=http%3A%2F%2Ftutorialzine.com%2F2009%2F11%2Ftwitter-list-ajax-fanpage%2F&amp;source=Tutorialzine&amp;style=normal ' height='61' width='50' frameborder='0' scrolling='no'></iframe></td> <td><script type="text/javascript"> var fbShare = {url: 'http://tutorialzine.com/2009/11/twitter-list-ajax-fanpage/',size:'large'}</script><script type="text/javascript" src="http://widgets.fbshare.me/files/fbshare.js"></script></td></table></div><!-- Generated by Digg Digg plugin, 
    Author : Yong Mook Kim
    Website : http://www.mkyong.com/blog/digg-digg-wordpress-plugin/
	--><img src="http://feeds.feedburner.com/~r/Tutorialzine/~4/i_bJMljQEHE" height="1" width="1"/>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:36:"http://wellformedweb.org/CommentAPI/";a:1:{s:10:"commentRss";a:1:{i:0;a:5:{s:4:"data";s:63:"http://tutorialzine.com/2009/11/twitter-list-ajax-fanpage/feed/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:38:"http://purl.org/rss/1.0/modules/slash/";a:1:{s:8:"comments";a:1:{i:0;a:5:{s:4:"data";s:1:"2";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:42:"http://rssnamespace.org/feedburner/ext/1.0";a:1:{s:8:"origLink";a:1:{i:0;a:5:{s:4:"data";s:58:"http://tutorialzine.com/2009/11/twitter-list-ajax-fanpage/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}}}i:1;a:6:{s:4:"data";s:44:"
		
		
		
		
		
				
		

		
		
			
			
		
		";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";s:5:"child";a:6:{s:0:"";a:7:{s:5:"title";a:1:{i:0;a:5:{s:4:"data";s:59:"A Beautiful Apple-style Slideshow Gallery With CSS & jQuery";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"link";a:1:{i:0;a:5:{s:4:"data";s:59:"http://feedproxy.google.com/~r/Tutorialzine/~3/-FikwENbT5w/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"comments";a:1:{i:0;a:5:{s:4:"data";s:75:"http://tutorialzine.com/2009/11/beautiful-apple-gallery-slideshow/#comments";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:7:"pubDate";a:1:{i:0;a:5:{s:4:"data";s:31:"Sun, 01 Nov 2009 13:23:54 +0000";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"category";a:2:{i:0;a:5:{s:4:"data";s:3:"CSS";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:1;a:5:{s:4:"data";s:6:"jQuery";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"guid";a:1:{i:0;a:5:{s:4:"data";s:30:"http://tutorialzine.com/?p=483";s:7:"attribs";a:1:{s:0:"";a:1:{s:11:"isPermaLink";s:5:"false";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:11:"description";a:1:{i:0;a:5:{s:4:"data";s:197:"This week, we are making an Apple-like slideshow gallery, similar to the one they use on their website to showcase their products. It will be entirely front-end based, no PHP or databases required.";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:32:"http://purl.org/dc/elements/1.1/";a:1:{s:7:"creator";a:1:{i:0;a:5:{s:4:"data";s:6:"Martin";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:40:"http://purl.org/rss/1.0/modules/content/";a:1:{s:7:"encoded";a:1:{i:0;a:5:{s:4:"data";s:10480:"<h3>Introduction</h3>
<p>When speaking about design, there is one company that is impossible to go without. Apple values design &#8211; being a new product, a fancy catalog or their website &#8211; there is always something to admire.</p>
<p>This week, we are making an <strong>Apple-like slideshow gallery</strong>, similar to the one they use on their website to showcase their products. It will be entirely front-end based, no PHP or databases required.</p>
<p>So go ahead and download the example source code and continue with the first step.</p>
<h3>Step 1 &#8211; XHTML</h3>
<p>There is no need for a database nor a PHP back-end for this gallery. This means that it is really easy to incorporate into an existing site &#8211; you just have to change a few lines of html code.</p>
<p>Lets take a closer look at the XHTML markup:</p>
<h4>demo.html</h4>
<pre class="brush:html">&lt;div id="main"&gt;

&lt;div id="gallery"&gt;

&lt;div id="slides"&gt;

&lt;div class="slide"&gt;&lt;img src="img/sample_slides/macbook.jpg" width="920" height="400" /&gt;&lt;/div&gt;
&lt;div class="slide"&gt;&lt;img src="img/sample_slides/iphone.jpg" width="920" height="400" /&gt;&lt;/div&gt;
&lt;div class="slide"&gt;&lt;img src="img/sample_slides/imac.jpg" width="920" height="400" /&gt;&lt;/div&gt;

&lt;/div&gt;

&lt;div id="menu"&gt;

&lt;ul&gt;
&lt;li class="fbar"&gt;&amp;nbsp;&lt;/li&gt;&lt;li class="menuItem"&gt;&lt;a href=""&gt;&lt;img src="img/sample_slides/thumb_macbook.png" /&gt;&lt;/a&gt;&lt;/li&gt;&lt;li class="menuItem"&gt;&lt;a href=""&gt;&lt;img src="img/sample_slides/thumb_iphone.png" /&gt;&lt;/a&gt;&lt;/li&gt;&lt;li class="menuItem"&gt;&lt;a href=""&gt;&lt;img src="img/sample_slides/thumb_imac.png" /&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;/div&gt;

&lt;/div&gt;

&lt;/div&gt;</pre>
<p>The idea is simple &#8211; there are two main container DIVs &#8211; the one with id=&#8221;<strong>menu&#8221;</strong> holds the thumbnails, and the other &#8211; <strong>&#8220;slides&#8221;</strong> holds the slides themselves.</p>
<p>To add a new slide, you&#8217;ll just have to add new elements to both containers. The slides are <strong>JPG</strong>s, and the thumbnails are transparent <strong>PNG</strong>s, but you can use any image type you want.</p>
<p>You can even put any kind of HTML in as well. For example you could make a certain slide into a hyperlink by just putting the image inside of an anchor tag.</p>
<p>That said, it is important to have the <strong>width</strong> and <strong>height</strong> attributes set up of the slide images &#8211; it is used by jQuery to determine the width of the sliding area, as you&#8217;ll see in a moment.</p>
<p>Also notice that the thumbnail <strong>LI</strong> elements. The first one is assigned a class name of <strong>fbar</strong> , used to only show a vertical dividing bar, and the others are assigned a <strong>menuItem</strong> class &#8211; used as the slideshow control buttons.</p>
<p>Now lets continue with the next step.</p>
<div id="attachment_487" class="wp-caption alignnone" style="width: 610px"><img class="size-full wp-image-487" title="An Apple-like Slideshow Gallery" src="http://tutorialzine.com/wp-content/uploads/2009/11/i2.jpg" alt="An Apple-like Slideshow Gallery" width="600" height="230" /><p class="wp-caption-text">An Apple-like Slideshow Gallery</p></div>
<h3>Step 2 &#8211; CSS</h3>
<p>Lets see what lays hidden in our stylesheet. I&#8217;ve only included the styles that are directly used by the gallery. You can view the rest of the styles, used to show the demo, in <strong>demo.css</strong>.</p>
<h4>demo.css</h4>
<pre class="brush:css">body,h1,h2,h3,p,quote,small,form,input,ul,li,ol,label{
	/* Page reset */
	margin:0px;
	padding:0px;
}

body{
	/* Setting default text color, background and a font stack */
	color:#444444;
	font-size:13px;
	background: #f2f2f2;
	font-family:Arial, Helvetica, sans-serif;
}

/* Gallery styles */

#gallery{
	/* CSS3 Box Shadow */
	-moz-box-shadow:0 0 3px #AAAAAA;
	-webkit-box-shadow:0 0 3px #AAAAAA;
	box-shadow:0 0 3px #AAAAAA;

	/* CSS3 Rounded Corners */

	-moz-border-radius-bottomleft:4px;
	-webkit-border-bottom-left-radius:4px;
	border-bottom-left-radius:4px;

	-moz-border-radius-bottomright:4px;
	-webkit-border-bottom-right-radius:4px;
	border-bottom-right-radius:4px;

	border:1px solid white;

	background:url(img/panel.jpg) repeat-x bottom center #ffffff;

	/* The width of the gallery */
	width:920px;
	overflow:hidden;
}

#slides{
	/* This is the slide area */
	height:400px;

	/* jQuery changes the width later on to the sum of the widths of all the slides. */
	width:920px;
	overflow:hidden;
}

.slide{
	float:left;
}

#menu{
	/* This is the container for the thumbnails */
	height:45px;
}

ul{
	margin:0px;
	padding:0px;
}

li{
	/* Every thumbnail is a li element */
	width:60px;
	display:inline-block;
	list-style:none;
	height:45px;
	overflow:hidden;
}

li.inact:hover{
	/* The inactive state, highlighted on mouse over */
	background:url(img/pic_bg.png) repeat;
}

li.act,li.act:hover{
	/* The active state of the thumb */
	background:url(img/active_bg.png) no-repeat;
}

li.act a{
	cursor:default;
}

.fbar{
	/* The left-most vertical bar, next to the first thumbnail */
	width:2px;
	background:url(img/divider.png) no-repeat right;
}

li a{
	display:block;
	background:url(img/divider.png) no-repeat right;
	height:35px;
	padding-top:10px;
}

a img{
	border:none;
}</pre>
<p>We have used a number of CSS3 specific properties in this slideshow gallery:</p>
<ul>
<li><strong>box-shadow</strong>, which makes the gallery cast a light shadow around its edges. To use it, you have to provide offsets by X and Y (0 0 here), the blurring (3px in this example) and the color of the shadow;</li>
<li><strong>border-radius</strong>, which rounds the bottom corners of the gallery.</li>
</ul>
<p>Unfortunately, these properties are only supported in Safari, Chrome and Firefox for now. However in the rest of the browsers you still have a completely functional gallery.</p>
<p>Now it is time for some jQuery magic.</p>
<h3>Step 3 &#8211; jQuery</h3>
<p>As I already mentioned, this gallery does not use any server-side code, so it is all up to the front end to make the slideshow tick.</p>
<h4>script.js</h4>
<pre class="brush:js">$(document).ready(function(){
	/* This code is executed after the DOM has been completely loaded */

	var totWidth=0;
	var positions = new Array();

	$('#slides .slide').each(function(i){
		/* Loop through all the slides and store their accumulative widths in totWidth */
		positions[i]= totWidth;
		totWidth += $(this).width();

		/* The positions array contains each slide's commulutative offset from the left part of the container */

		if(!$(this).width())
		{
			alert("Please, fill in width &amp; height for all your images!");
			return false;
		}
	});

	$('#slides').width(totWidth);

	/* Change the cotnainer div's width to the exact width of all the slides combined */

	$('#menu ul li a').click(function(e){

		/* On a thumbnail click */
		$('li.menuItem').removeClass('act').addClass('inact');
		$(this).parent().addClass('act');

		var pos = $(this).parent().prevAll('.menuItem').length;

		$('#slides').stop().animate({marginLeft:-positions[pos]+'px'},450);
		/* Start the sliding animation */

		e.preventDefault();
		/* Prevent the default action of the link */
	});

	$('#menu ul li.menuItem:first').addClass('act').siblings().addClass('inact');
	/* On page load, mark the first thumbnail as active */
});</pre>
<p>The main idea behind this script is to loop through all the slides, sum up their widths and assign the sum to the slides container &#8211; the DIV with the id=&#8221;<strong>slides</strong>&#8220;. Because the slides are floated to the left and have enough room, they align next to each other.</p>
<p>Later, when you click a thumbnail, the script calculates which slide to show and scrolls the <strong>#slides</strong> div by assigning a negative margin via the <strong>animate</strong> method.</p>
<p>And with just 40 lines of code, the Apple-like slider gallery is finished!</p>
<div id="attachment_488" class="wp-caption alignnone" style="width: 610px"><img class="size-full wp-image-488" title="The Gallery Explained" src="http://tutorialzine.com/wp-content/uploads/2009/11/i1.jpg" alt="The Gallery Explained" width="600" height="460" /><p class="wp-caption-text">The Gallery Explained</p></div>
<h3>Conclusion</h3>
<p>In three easy steps we created a beautiful Apple-style slideshow gallery. It can be easily included into any website by just adding a few lines of code.</p>
<p>You are free to modify and built upon the gallery for your own projects. Also be sure to share what you&#8217;ve done with the community via our <strong>Tutorial Mashups</strong> (above the comment section).</p>
<div><table border=0 bgcolor=#ffffff> <td><iframe src='http://digg.com/api/diggthis.php?w=new&amp;u=http%3A%2F%2Ftutorialzine.com%2F2009%2F11%2Fbeautiful-apple-gallery-slideshow%2F&amp;t=A+Beautiful+Apple-style+Slideshow+Gallery+With+CSS+%26+jQuery&amp;s=normal' height='80' width='52' frameborder='0' scrolling='no'></iframe></td> <td><iframe src='http://www.reddit.com/button_content?newwindow=1&amp;url=http%3A%2F%2Ftutorialzine.com%2F2009%2F11%2Fbeautiful-apple-gallery-slideshow%2F&amp;title=A+Beautiful+Apple-style+Slideshow+Gallery+With+CSS+%26+jQuery&amp;t=2 ' height='80' width='52' scrolling='no' frameborder='0' ></iframe></td> <td><iframe src='http://widgets.dzone.com/links/widgets/zoneit.html?url=http%3A%2F%2Ftutorialzine.com%2F2009%2F11%2Fbeautiful-apple-gallery-slideshow%2F&amp;title=A+Beautiful+Apple-style+Slideshow+Gallery+With+CSS+%26+jQuery&amp;t=1 ' height='80' width='52' scrolling='no' frameborder='0' ></iframe></td> <td><iframe src='http://api.tweetmeme.com/button.js?url=http%3A%2F%2Ftutorialzine.com%2F2009%2F11%2Fbeautiful-apple-gallery-slideshow%2F&amp;source=Tutorialzine&amp;style=normal ' height='61' width='50' frameborder='0' scrolling='no'></iframe></td> <td><script type="text/javascript"> var fbShare = {url: 'http://tutorialzine.com/2009/11/beautiful-apple-gallery-slideshow/',size:'large'}</script><script type="text/javascript" src="http://widgets.fbshare.me/files/fbshare.js"></script></td></table></div><!-- Generated by Digg Digg plugin, 
    Author : Yong Mook Kim
    Website : http://www.mkyong.com/blog/digg-digg-wordpress-plugin/
	--><img src="http://feeds.feedburner.com/~r/Tutorialzine/~4/-FikwENbT5w" height="1" width="1"/>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:36:"http://wellformedweb.org/CommentAPI/";a:1:{s:10:"commentRss";a:1:{i:0;a:5:{s:4:"data";s:71:"http://tutorialzine.com/2009/11/beautiful-apple-gallery-slideshow/feed/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:38:"http://purl.org/rss/1.0/modules/slash/";a:1:{s:8:"comments";a:1:{i:0;a:5:{s:4:"data";s:2:"22";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:42:"http://rssnamespace.org/feedburner/ext/1.0";a:1:{s:8:"origLink";a:1:{i:0;a:5:{s:4:"data";s:66:"http://tutorialzine.com/2009/11/beautiful-apple-gallery-slideshow/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}}}i:2;a:6:{s:4:"data";s:50:"
		
		
		
		
		
				
		
		
		

		
		
			
			
		
		";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";s:5:"child";a:6:{s:0:"";a:7:{s:5:"title";a:1:{i:0;a:5:{s:4:"data";s:35:"Making a Google Wave History Slider";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"link";a:1:{i:0;a:5:{s:4:"data";s:59:"http://feedproxy.google.com/~r/Tutorialzine/~3/ep6fVrRznyg/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"comments";a:1:{i:0;a:5:{s:4:"data";s:75:"http://tutorialzine.com/2009/10/google-wave-history-slider-jquery/#comments";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:7:"pubDate";a:1:{i:0;a:5:{s:4:"data";s:31:"Sat, 24 Oct 2009 15:57:40 +0000";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"category";a:4:{i:0;a:5:{s:4:"data";s:3:"CSS";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:1;a:5:{s:4:"data";s:5:"MySQL";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:2;a:5:{s:4:"data";s:3:"PHP";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:3;a:5:{s:4:"data";s:6:"jQuery";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"guid";a:1:{i:0;a:5:{s:4:"data";s:30:"http://tutorialzine.com/?p=472";s:7:"attribs";a:1:{s:0:"";a:1:{s:11:"isPermaLink";s:5:"false";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:11:"description";a:1:{i:0;a:5:{s:4:"data";s:202:"Using PHP and jQuery we are going to create a Google Wave-like history slider. Using it, we will enable our visitors to go back and forth in time to view the changes that take place on a comment thread.";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:32:"http://purl.org/dc/elements/1.1/";a:1:{s:7:"creator";a:1:{i:0;a:5:{s:4:"data";s:6:"Martin";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:40:"http://purl.org/rss/1.0/modules/content/";a:1:{s:7:"encoded";a:1:{i:0;a:5:{s:4:"data";s:18761:"<h3>Introduction</h3>
<p>We&#8217;ve all seen the videos (and some even got access to a developer&#8217;s preview) of Google&#8217;s latest product &#8211; Wave.  Although not &#8220;ground-braking&#8221; and &#8220;revolutionary&#8221; as we&#8217;ve imagined (wonder why &#8220;over-hyped&#8221; comes to mind) it still features some great UI that will surely inspire at least a few developers to implement some of it in their works.</p>
<p>I, being one of those inspired people, am going to show you how to create a Google Wave-like history slider. Using it, we will enable our visitors to go back and forth in time to view the changes that take place on a comment thread.</p>
<p>So take a look at the demo (maybe even keep it open in a separate tab), download the example files and keep on reading.</p>
<h3>Step 1 &#8211; XHTML</h3>
<p>The technologies we are using include <strong>PHP</strong> as a back-end, <strong>MySQL</strong> as data storage,<strong> jQuery</strong>, <strong>CSS</strong> and <strong>XHTML</strong> for the front-end with <strong>AJAX</strong> in between. The slider itself is a component created with <a href="http://jqueryui.com/" target="_blank">jQuery UI</a>.</p>
<p>First lets take a look at the body section of <strong>demo.php</strong></p>
<h4>demo.php</h4>
<pre class="brush:html">&lt;div id="main"&gt;

&lt;p id="orig"&gt;View the &lt;a href="http://tutorialzine.com/2009/10/google-wave-history-slider-jquery/" target="_blank"&gt;original tutorial &amp;raquo;&lt;/a&gt;&lt;/p&gt;
&lt;h1&gt;Google Wave-like&lt;/h1&gt;
&lt;h2&gt;History Slider&lt;/h2&gt;

&lt;div id="wave"&gt;
&lt;div id="topBar"&gt;Your Demo Wave&lt;/div&gt;
&lt;div id="subBar"&gt;
&lt;img src="img/tutorialzine.png" alt="Tutorialzine" /&gt;&lt;img src="img/demo.png" alt="Demo" /&gt;&lt;img src="img/curious.png" alt="Curious" /&gt;
&lt;/div&gt;

&lt;div id="sliderContainer"&gt;
&lt;div id="slider"&gt;&lt;/div&gt;
&lt;div class="clear"&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;div id="commentArea"&gt;

&lt;?php
foreach($comments as $c)
{
	showComment($c);
	// Showing each comment
}
?&gt;

&lt;/div&gt;
&lt;input type="button" class="waveButtonMain" value="Add a comment" onclick="addComment()" /&gt;

&lt;div id="bottomBar"&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;</pre>
<p>This is pretty much all the layout we are using. The main reason why the code is so short is that we are using CSS to style it, and that the outputting of the comments is handled by a special PHP function, both of which will be explained in a minute.</p>
<div id="attachment_477" class="wp-caption alignnone" style="width: 610px"><img class="size-full wp-image-477" title="A Google Wave-like History Slider" src="http://tutorialzine.com/wp-content/uploads/2009/10/i11.jpg" alt="A Google Wave-like History Slider" width="600" height="230" /><p class="wp-caption-text">A Google Wave-like History Slider</p></div>
<h3>Step 2 &#8211; CSS</h3>
<p>The great thing about jQuery is that, thanks to Google&#8217;s CDN, you can directly include it in your site, without having to worry about downloading and storing it on your server. This also aids your page loading time.</p>
<p>The same is true for jQuery UI, which contains our slider. Not only that, but the CDN also holds the styling and images needed to display it properly.</p>
<p>However, we still have to include our own custom styles. In the example files you can find them in <strong>demo.css</strong>. Here only the more interesting bits are shown:</p>
<h4>demo.css</h4>
<pre class="brush:css">#orig{
	/* The link that float to the right of the title */
	float:right;
	font-family:"MyRiad Pro",Arial;
	font-size:10px;
	letter-spacing:1px;
	text-transform:uppercase;
	padding-top:10px;
}

.clear{
	/* Clearfix, needed by IE6 */
	clear:both;
}

#main{
	/* The main container */
	width:600px;
	margin:30px auto;
}

#wave{
	/* CSS rounded corners */
	-moz-border-radius:6px;
	-khtml-border-radius: 6px;
	-webkit-border-radius: 6px;
	border-radius:6px;

	background:white;
	width:100%;
	overflow:hidden;
}

#topBar{
	background:url(img/bg.jpg) repeat-x;
	font-size:12px;
	color:white;

	height:20px;
	overflow:hidden;
	padding:5px 0 0 10px;

	border-bottom:1px solid #e4f1ff;
	-moz-border-radius:6px 6px 0 0;
	/* A Firefox fix, for once */
}

#bottomBar{
	height:40px;
	background-color:#c9e2fc;
	-moz-border-radius:0 0 6px 6px;
	border-top:1px solid #CCCCCC;
}

#subBar{
	background-color:#c9e2fc;
	padding-left:10px;
}

#subBar img{
	/* The avatars at the top of the page */
	margin:8px 8px 8px 0;
	border:1px solid #cccccc;
}

.waveButton,.waveButtonMain{
	/* The submit buttons */
	background:url(img/button_bg.jpg) repeat-x 50% 50%;
	border:1px solid #DDDDDD;
	padding:4px;

	cursor:pointer;
}

.waveButtonMain{
	display:block;
	margin:10px 20px;
}

.textArea{
	padding:4px;
	font-family:Arial,Helvetica,Sans-serif;
	font-size:12px;
	color:#666666;
	border:1px solid #66aff9;
	margin-bottom:10px;
}

.replyLink{
	float:right;
}

#commentArea{
	padding:10px;
	color:#444444;
}

.commentText{
	margin-left:40px;
}

.waveComment .waveComment{
	padding-left:30px;
}

.waveComment .waveComment .replyLink{
	/* Hiding the reply link on the comment replies -
	only 2 levels of ancestry are allowed */

	display:none;
}

.waveTime{
	color:#999999;
	float:right;
	font-size:10px;
}

#slider{
	width:400px;
	font-size:10px;
	float:right;
	margin-right:10px;
}

#sliderContainer{
	background:url(img/dark_bg.jpg) repeat-x #f5f5f5 50% 50%;
	padding:9px 10px;
	border:1px solid #bbbbbb;
	border-left:0;
	border-right:0;

	height:10px;
	padding:9px 10px;
}

div.ui-widget-content{
	/* Styling the slider */
	background:#FFFFFF;
	border:1px solid #CCCCCC;
}

.comment{
	margin:5px 10px;
	padding:8px 10px;
	border:2px solid #cccccc;

	/* Rounding the comment */
	-moz-border-radius:6px;
	-khtml-border-radius: 6px;
	-webkit-border-radius: 6px;
	border-radius:6px;

	overflow:hidden;
}

span.name{
	font-weight:bold;
	color:#999999;
}

.commentAvatar{
	width:30px;
	height:30px;
	float:left;
	margin-right:10px;
}</pre>
<div id="attachment_476" class="wp-caption alignnone" style="width: 610px"><img class="size-full wp-image-476" title="The History Slider Explained" src="http://tutorialzine.com/wp-content/uploads/2009/10/i22.png" alt="The History Slider Explained" width="600" height="460" /><p class="wp-caption-text">The History Slider Explained</p></div>
<h3>Step 3 &#8211; PHP</h3>
<p>There are four main PHP files that handle the back-end:</p>
<ol>
<li><strong>demo.php</strong> &#8211; outputs the comments;</li>
<li><strong>ajax/saveComment.php</strong> &#8211; adds new comments, it&#8217;s reached by AJAX requests;</li>
<li><strong>functions.php</strong> &#8211; holds some functions used by demo.php;</li>
<li><strong>connect.php</strong> &#8211; handles the DB connection.</li>
</ol>
<p>We&#8217;ll be looking only at the first three files here.</p>
<h4>demo.php</h4>
<pre class="brush:php">define("INCLUDE_CHECK",1);
require 'connect.php';
require 'functions.php';
// Including the files for the DB connection and our custom functions
// Removing comments that are older than an hour.

mysql_query("DELETE FROM wave_comments WHERE id&gt;5 AND dt&lt;SUBTIME(NOW(),'0 1:0:0')");

$comments_result = mysql_query("SELECT * FROM wave_comments ORDER BY id ASC");
// Selecting all the comments ordered by id in ascending order

$comments=array();
$js_history='';

while($row=mysql_fetch_assoc($comments_result))
{
	if($row['parent']==0)
	// If the comment is not a reply to a previous comment, put it into $comments directly
	$comments[$row['id']] = $row;
	else
	{
		if(!$comments[$row['parent']]) continue;

		$comments[$row['parent']]['replies'][] = $row;
		// If it is a reply, put it in the 'replies' property of its parent
	}

	$js_history.='addHistory({id:"'.$row['id'].'"});'.PHP_EOL;
	// Adds JS history for each comment
}

$js_history='&lt;script type="text/javascript"&gt;
'.$js_history.'
&lt;/script&gt;';

// This is later put into the head and executed on page load</pre>
<p>The comments are ether parents (they are added directly to the thread) or children (added as a reply to a parent). Only two levels of ancestry are allowed (meaning that replies are disabled for the children).</p>
<p>The comments are later outputted by the <strong>showComment</strong> function (you can see it in the XHTML step above).</p>
<h4>ajax / saveComment.php</h4>
<pre class="brush:php">define("INCLUDE_CHECK",1);
require'../connect.php';

if(empty($_POST['comment'])) die("0");
// If there isn't a comment text, exit

$comment = mysql_real_escape_string(nl2br(strip_tags($_POST['comment'])));
$user='Demo';
// This would be a nice place to start customizing - the default user
// You can integrate it to any site and show a different username.

$addon='';
if($_POST['parent']) $addon=',parent='.(int)$_POST['parent'];

mysql_query("INSERT INTO wave_comments SET usr='".$user."', comment='".$comment."', dt=NOW()".$addon);

if(mysql_affected_rows($link)==1)
	echo mysql_insert_id($link);
	// If the insert was successful, echo the newly assigned ID
else
	echo '0';</pre>
<p>And lastly, there is <strong>functions.php</strong></p>
<h4>functions.php</h4>
<pre class="brush:php">if(!defined('INCLUDE_CHECK')) die('You are not allowed to execute this file directly');

function showComment($arr)
{
	echo '
	&lt;div class="waveComment com-'.$arr['id'].'"&gt;

		&lt;div class="comment"&gt;
		&lt;div class="waveTime"&gt;'.waveTime($arr['dt']).'&lt;/div&gt;
		&lt;div class="commentAvatar"&gt;
		&lt;img src="img/'.strtolower($arr['usr']).'.png" width="30" height="30" alt="'.$arr['usr'].'" /&gt;
		&lt;/div&gt;

		&lt;div class="commentText"&gt;
		&lt;span class="name"&gt;'.$arr['usr'].':&lt;/span&gt; '.$arr['comment'].'
		&lt;/div&gt;

		&lt;div class="replyLink"&gt;
		&lt;a href="" onclick="addComment(this,'.$arr['id'].');return false;"&gt;add a reply &amp;raquo;&lt;/a&gt;
		&lt;/div&gt;

		&lt;div class="clear"&gt;&lt;/div&gt;
	&lt;/div&gt;';

	// Output the comment, and its replies, if any
	if($arr['replies'])
	{
		foreach($arr['replies'] as $r)
		showComment($r);
	}
	echo '&lt;/div&gt;';
}

function waveTime($t)
{
	$t = strtotime($t);

	if(date('d')==date('d',$t)) return date('h:i A',$t);
	return date('F jS Y h:i A',$t);
	// If the comment was written today, output only the hour and minute
	// if it was not, output a full date/time
}</pre>
<p>The last step is the trickiest one &#8211; in this case the jQuery code.</p>
<h3>Step 4 &#8211; jQuery</h3>
<p>All the JS code is located in <strong>script.js</strong>. I will split it into two parts:</p>
<h4>script.js &#8211; part 1</h4>
<pre class="brush:js">$(document).ready(function(){
	// Executed once all the page elements are loaded

	lastVal = totHistory;

	// Create the slider:
	$("#slider").slider({
		value:totHistory,
		min: 1,
		max: totHistory,
		animate: true,
		slide: function(event, ui) {

			if(lastVal&gt;ui.value)
			$(buildQ(lastVal,ui.value)).hide('fast').find('.addComment').remove();
			// Using buildQ to build the jQuery selector
			// If we are moving the slider backward, hide the previous comment

			else if(lastVal&lt;ui.value)
			$(buildQ(lastVal,ui.value)).show('fast');
			// Otherwise show it

			lastVal = ui.value;
		}
	});
});

var totHistory=0;
// Holds the number of comments

var positions = new Array();
var lastVal;

function addHistory(obj)
{
	/* Gets called on page load for each comment, and on comment submit */
	totHistory++;
	positions.push(obj.id);
}

function buildQ(from,to)
{
	/* Building a jQuery selector from the begin
	and end point of the slide */

	if(from&gt;to)
	{
		var tmp=to;
		to=from;
		from=tmp;
	}

	from++;
	to++;

	var query='';
	for(var i=from;i&lt;to;i++)
	{
		if(i!=from) query+=',';
		query+='.com-'+positions[i-1];
	}

	/* Each comment has an unique com-(Comment ID) class
	that we are using to address it */

	return query;
}</pre>
<p>As you remember, we generated a special PHP string, which holds calls to the <strong>addHistory</strong> function. Each time it runs, it increments the <strong>totHistory</strong> counter. After all the comments are loaded the <strong>$(document).ready</strong> runs and the slider is initialized with <strong>totHistory</strong> as the maximum value of the slider. The minimum value is 1, because we want to have at least one comment visible.</p>
<p>Now lets take a look at the second part of the file.</p>
<h4>script.js &#8211; part 2</h4>
<pre class="brush:js">function addComment(where,parent)
{
	/*	This functions gets called from both the "Add a comment" button
	on the bottom of the page, and the add a reply link.
	It shows the comment submition form */

	var $el;
	if($('.waveButton').length) return false;
	// If there already is a comment submition form
	// shown on the page, return and exit

	if(!where)
		$el = $('#commentArea');
	else
		$el = $(where).closest('.waveComment');

	if(!parent) parent=0;

	// If we are adding a comment, but there are hidden comments by the slider:
	$('.waveComment').show('slow');
	lastVal = totHistory;

	$('#slider').slider('option','value',totHistory);
	// Move the slider to the end point and show all comments
	var comment = '&lt;div class="waveComment addComment"&gt;\
	\
	&lt;div class="comment"&gt;\
	&lt;div class="commentAvatar"&gt;\
	&lt;img src="img/demo.png" width="30" height="30" /&gt;\
	&lt;/div&gt;\
	\
	&lt;div class="commentText"&gt;\
	\
	&lt;textarea class="textArea" rows="2" cols="70" name="" /&gt;\
	&lt;div&gt;&lt;input type="button" class="waveButton" value="Add comment" onclick="addSubmit(this,'+parent+')" /&gt; or &lt;a href="" onclick="cancelAdd(this);return false"&gt;cancel&lt;/a&gt;&lt;/div&gt;\
	\
	&lt;/div&gt;\
	&lt;/div&gt;\
	\
	&lt;/div&gt;';

	$el.append(comment);
	// Append the form
}

function cancelAdd(el)
{
	$(el).closest('.waveComment').remove();
}

function addSubmit(el,parent)
{
	/* Executed when clicking the submit button */
	var cText = $(el).closest('.commentText');
	var text = cText.find('textarea').val();
	var wC = $(el).closest('.waveComment');
	if(text.length&lt;4)
	{
		alert("Your comment is too short!");
		return false;
	}

	$(el).parent().html('&lt;img src="img/ajax_load.gif" width="16" height="16" /&gt;');
	// Showing the loading gif animation
	// Send an AJAX request:

	$.ajax({
		type: "POST",
		url: "ajax/saveComment.php",
		data: "comment="+encodeURIComponent(text)+"&amp;parent="+parent,
		/* Sending both the text and the parent of the comment */
		success: function(msg){

			/* PHP returns the automatically assigned ID of the new comment */
			var ins_id = parseInt(msg);
			if(ins_id)
			{
				wC.addClass('com-'+ins_id);
				addHistory({id:ins_id});
				$('#slider').slider('option', 'max', totHistory).slider('option','value',totHistory);
				lastVal=totHistory;
			}

			transForm(text,cText);
			// Hiding the form and showing the newly-added comment in its place
		}
	});
}

function transForm(text,cText)
{
	var tmpStr ='&lt;span class="name"&gt;Demo:&lt;/span&gt; '+text;
	cText.html(tmpStr);
}</pre>
<p>The functions in this part of the code handle the comment submission via <strong>AJAX</strong> to the <strong>PHP </strong>back-end.</p>
<p>I believe that further clarification is needed for the <strong>success</strong> function in the AJAX. As you know, it is called when we have successfully executed the AJAX request (in this case it is called if the comment was written to the MySQL database).</p>
<p>Inside this function we check whether a proper insert ID is returned, which corresponds to the internal MySQL id that was given to the <strong>auto-increment</strong> field (see below for the <strong>MySQL</strong> part or take a look at <strong>table.sql</strong> in the example files).</p>
<p>If everything is OK, we call the <strong>addHistory</strong> function with the new data and update the maximum value of the slider. This ensures that the newly-added comment is history-scrollable with the rest of them.</p>
<h3>Step 5 &#8211; MySQL</h3>
<p>This step is only required if you want to run the demo on your own server. If you run into problems, read through the comments below or write a new one if your problem is not addressed there.</p>
<p>To be able to run the demo, you&#8217;d have to create the MySQL table <strong>wave_comments</strong> with the following code (also available in <strong>table.sql</strong> in the example files):</p>
<pre class="brush:sql">CREATE TABLE `wave_comments` (
`id` int(11) NOT NULL auto_increment,
`parent` int(11) NOT NULL default '0',
`usr` varchar(16) collate utf8_unicode_ci NOT NULL default '',
`comment` text collate utf8_unicode_ci NOT NULL,
`dt` datetime NOT NULL default '0000-00-00 00:00:00',
PRIMARY KEY  (`id`),
KEY `parent` (`parent`,`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;</pre>
<p>With this our Google Wave-like History Slider is complete!</p>
<h3>Conclusion</h3>
<p>You are free to modify the code of this example and use it in your own sites. Also it would be great if you share what you&#8217;ve done with the community, via our newly added feature &#8211; <strong>Tutorial Mashups</strong> (you can find it below every tutorial).</p>
<div><table border=0 bgcolor=#ffffff> <td><iframe src='http://digg.com/api/diggthis.php?w=new&amp;u=http%3A%2F%2Ftutorialzine.com%2F2009%2F10%2Fgoogle-wave-history-slider-jquery%2F&amp;t=Making+a+Google+Wave+History+Slider&amp;s=normal' height='80' width='52' frameborder='0' scrolling='no'></iframe></td> <td><iframe src='http://www.reddit.com/button_content?newwindow=1&amp;url=http%3A%2F%2Ftutorialzine.com%2F2009%2F10%2Fgoogle-wave-history-slider-jquery%2F&amp;title=Making+a+Google+Wave+History+Slider&amp;t=2 ' height='80' width='52' scrolling='no' frameborder='0' ></iframe></td> <td><iframe src='http://widgets.dzone.com/links/widgets/zoneit.html?url=http%3A%2F%2Ftutorialzine.com%2F2009%2F10%2Fgoogle-wave-history-slider-jquery%2F&amp;title=Making+a+Google+Wave+History+Slider&amp;t=1 ' height='80' width='52' scrolling='no' frameborder='0' ></iframe></td> <td><iframe src='http://api.tweetmeme.com/button.js?url=http%3A%2F%2Ftutorialzine.com%2F2009%2F10%2Fgoogle-wave-history-slider-jquery%2F&amp;source=Tutorialzine&amp;style=normal ' height='61' width='50' frameborder='0' scrolling='no'></iframe></td> <td><script type="text/javascript"> var fbShare = {url: 'http://tutorialzine.com/2009/10/google-wave-history-slider-jquery/',size:'large'}</script><script type="text/javascript" src="http://widgets.fbshare.me/files/fbshare.js"></script></td></table></div><!-- Generated by Digg Digg plugin, 
    Author : Yong Mook Kim
    Website : http://www.mkyong.com/blog/digg-digg-wordpress-plugin/
	--><img src="http://feeds.feedburner.com/~r/Tutorialzine/~4/ep6fVrRznyg" height="1" width="1"/>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:36:"http://wellformedweb.org/CommentAPI/";a:1:{s:10:"commentRss";a:1:{i:0;a:5:{s:4:"data";s:71:"http://tutorialzine.com/2009/10/google-wave-history-slider-jquery/feed/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:38:"http://purl.org/rss/1.0/modules/slash/";a:1:{s:8:"comments";a:1:{i:0;a:5:{s:4:"data";s:2:"17";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:42:"http://rssnamespace.org/feedburner/ext/1.0";a:1:{s:8:"origLink";a:1:{i:0;a:5:{s:4:"data";s:66:"http://tutorialzine.com/2009/10/google-wave-history-slider-jquery/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}}}i:3;a:6:{s:4:"data";s:50:"
		
		
		
		
		
				
		
		
		

		
		
			
			
		
		";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";s:5:"child";a:6:{s:0:"";a:7:{s:5:"title";a:1:{i:0;a:5:{s:4:"data";s:51:"Making A Cool Login System With PHP, MySQL & jQuery";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"link";a:1:{i:0;a:5:{s:4:"data";s:59:"http://feedproxy.google.com/~r/Tutorialzine/~3/ZdWYt_XbS2E/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"comments";a:1:{i:0;a:5:{s:4:"data";s:70:"http://tutorialzine.com/2009/10/cool-login-system-php-jquery/#comments";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:7:"pubDate";a:1:{i:0;a:5:{s:4:"data";s:31:"Sat, 17 Oct 2009 19:11:02 +0000";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"category";a:4:{i:0;a:5:{s:4:"data";s:3:"CSS";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:1;a:5:{s:4:"data";s:5:"MySQL";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:2;a:5:{s:4:"data";s:3:"PHP";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:3;a:5:{s:4:"data";s:6:"jQuery";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"guid";a:1:{i:0;a:5:{s:4:"data";s:30:"http://tutorialzine.com/?p=450";s:7:"attribs";a:1:{s:0:"";a:1:{s:11:"isPermaLink";s:5:"false";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:11:"description";a:1:{i:0;a:5:{s:4:"data";s:189:"Today we are making a cool &#038; simple login / registration system. It will give you the ability to easily create a member-only area on your site and provide an easy registration process.";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:32:"http://purl.org/dc/elements/1.1/";a:1:{s:7:"creator";a:1:{i:0;a:5:{s:4:"data";s:6:"Martin";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:40:"http://purl.org/rss/1.0/modules/content/";a:1:{s:7:"encoded";a:1:{i:0;a:5:{s:4:"data";s:17250:"<h3>Introduction</h3>
<p>Today we are making a cool &amp; simple login / registration system. It will give you the ability to easily create a member-only area on your site and provide an easy registration process.</p>
<p>It is going to be PHP driven and store all the registrations into a MySQL database.</p>
<p>To add the needed flair, we are using the amazing <a href="http://web-kreation.com/index.php/tutorials/nice-clean-sliding-login-panel-built-with-jquery/" target="_blank">sliding jQuery panel</a>, developed by <a href="http://web-kreation.com/" target="_blank">Web-kreation</a>.</p>
<h3>Step 1 &#8211; MySQL</h3>
<p>First we have to create the table that will hold all the registrations. This code is available in <strong>table.sql</strong>.</p>
<h4>table.sql</h4>
<pre class="brush:sql">--
-- Table structure for table `tz_members`
--

CREATE TABLE `tz_members` (
  `id` int(11) NOT NULL auto_increment,
  `usr` varchar(32) collate utf8_unicode_ci NOT NULL default '',
  `pass` varchar(32) collate utf8_unicode_ci NOT NULL default '',
  `email` varchar(255) collate utf8_unicode_ci NOT NULL default '',
  `regIP` varchar(15) collate utf8_unicode_ci NOT NULL default '',
  `dt` datetime NOT NULL default '0000-00-00 00:00:00',
  PRIMARY KEY  (`id`),
  UNIQUE KEY `usr` (`usr`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;</pre>
<p>Notice that we&#8217;ve defined the id as an integer with <strong>auto_increment</strong> &#8211; it is automatically assigned to every site member. Also, we&#8217;ve defined <strong>usr</strong> as an <strong>unique key</strong> &#8211; no two users with the same usernames are allowed.</p>
<p>We later use this in the registration to determine whether the username has been taken.</p>
<p>After you create the table, do not forget to fill in your database credentials in <strong>connect.php</strong> so you can run the demo on your own server.</p>
<h3>Step 2 &#8211; XHTML</h3>
<p>First, we have to incorporate Web-kreation&#8217;s form into our page.</p>
<h4>demo.php</h4>
<pre class="brush:html;highlight:[28,56,63]">&lt;!-- Panel --&gt;
&lt;div id="toppanel"&gt;

&lt;div id="panel"&gt;
&lt;div class="content clearfix"&gt;
&lt;div class="left"&gt;
&lt;h1&gt;The Sliding jQuery Panel&lt;/h1&gt;
&lt;h2&gt;A register/login solution&lt;/h2&gt;
&lt;p class="grey"&gt;You are free to use this login and registration system in you sites!&lt;/p&gt;
&lt;h2&gt;A Big Thanks&lt;/h2&gt;
&lt;p class="grey"&gt;This tutorial was built on top of &lt;a href="http://web-kreation.com/index.php/tutorials/nice-clean-sliding-login-panel-built-with-jquery" title="Go to site"&gt;Web-Kreation&lt;/a&gt;'s amazing sliding panel.&lt;/p&gt;
&lt;/div&gt;

&lt;?php
if(!$_SESSION['id']):
// If you are not logged in
?&gt;

&lt;div class="left"&gt;
&lt;!-- Login Form --&gt;
&lt;form class="clearfix" action="" method="post"&gt;
&lt;h1&gt;Member Login&lt;/h1&gt;

&lt;?php
if($_SESSION['msg']['login-err'])
{
	echo '&lt;div class="err"&gt;'.$_SESSION['msg']['login-err'].'&lt;/div&gt;';
	unset($_SESSION['msg']['login-err']);
	// This will output login errors, if any
}
?&gt;

&lt;label class="grey" for="username"&gt;Username:&lt;/label&gt;
&lt;input class="field" type="text" name="username" id="username" value="" size="23" /&gt;
&lt;label class="grey" for="password"&gt;Password:&lt;/label&gt;
&lt;input class="field" type="password" name="password" id="password" size="23" /&gt;
&lt;label&gt;&lt;input name="rememberMe" id="rememberMe" type="checkbox" checked="checked" value="1" /&gt; &amp;nbsp;Remember me&lt;/label&gt;
&lt;div class="clear"&gt;&lt;/div&gt;
&lt;input type="submit" name="submit" value="Login" class="bt_login" /&gt;
&lt;/form&gt;

&lt;/div&gt;

&lt;div class="left right"&gt;

&lt;!-- Register Form --&gt;

&lt;form action="" method="post"&gt;
&lt;h1&gt;Not a member yet? Sign Up!&lt;/h1&gt;

&lt;?php

if($_SESSION['msg']['reg-err'])
{
	echo '&lt;div class="err"&gt;'.$_SESSION['msg']['reg-err'].'&lt;/div&gt;';
	unset($_SESSION['msg']['reg-err']);
	// This will output the registration errors, if any
}

if($_SESSION['msg']['reg-success'])
{
	echo '&lt;div class="success"&gt;'.$_SESSION['msg']['reg-success'].'&lt;/div&gt;';
	unset($_SESSION['msg']['reg-success']);
	// This will output the registration success message
}

?&gt;

&lt;label class="grey" for="username"&gt;Username:&lt;/label&gt;
&lt;input class="field" type="text" name="username" id="username" value="" size="23" /&gt;
&lt;label class="grey" for="email"&gt;Email:&lt;/label&gt;
&lt;input class="field" type="text" name="email" id="email" size="23" /&gt;
&lt;label&gt;A password will be e-mailed to you.&lt;/label&gt;
&lt;input type="submit" name="submit" value="Register" class="bt_register" /&gt;
&lt;/form&gt;

&lt;/div&gt;

&lt;?php
else:
// If you are logged in
?&gt;

&lt;div class="left"&gt;
&lt;h1&gt;Members panel&lt;/h1&gt;
&lt;p&gt;You can put member-only data here&lt;/p&gt;
&lt;a href="registered.php"&gt;View a special member page&lt;/a&gt;
&lt;p&gt;- or -&lt;/p&gt;
&lt;a href="?logoff"&gt;Log off&lt;/a&gt;
&lt;/div&gt;
&lt;div class="left right"&gt;
&lt;/div&gt;

&lt;?php
endif;
// Closing the IF-ELSE construct
?&gt;

&lt;/div&gt;
&lt;/div&gt; &lt;!-- /login --&gt;

&lt;!-- The tab on top --&gt;
&lt;div class="tab"&gt;
&lt;ul class="login"&gt;
&lt;li class="left"&gt;&amp;nbsp;&lt;/li&gt;
&lt;li&gt;Hello &lt;?php echo $_SESSION['usr'] ? $_SESSION['usr'] : 'Guest';?&gt;!&lt;/li&gt;
&lt;li class="sep"&gt;|&lt;/li&gt;
&lt;li id="toggle"&gt;
&lt;a id="open" class="open" href="#"&gt;&lt;?php echo $_SESSION['id']?'Open Panel':'Log In | Register';?&gt;&lt;/a&gt;
&lt;a id="close" style="display: none;" class="close" href="#"&gt;Close Panel&lt;/a&gt;
&lt;/li&gt;
&lt;li class="right"&gt;&amp;nbsp;&lt;/li&gt;
&lt;/ul&gt;

&lt;/div&gt; &lt;!-- / top --&gt;
&lt;/div&gt; &lt;!--panel --&gt;</pre>
<p>At several places in this code, there are some PHP operators that check whether <strong>$_SESSION['usr']</strong> or <strong>$_SESSION['id']</strong> are defined. This is true only if the page visitor is logged in the site, which allows us to show specific content to site members. We will cover it in detail in a moment.</p>
<p>After the form, we put the rest of the page.</p>
<pre class="brush:html">&lt;div class="pageContent"&gt;

&lt;div id="main"&gt;

&lt;div class="container"&gt;
&lt;h1&gt;A Cool Login System&lt;/h1&gt;
&lt;h2&gt;Easy registration management with PHP &amp;amp; jQuery&lt;/h2&gt;
&lt;/div&gt;

&lt;div class="container"&gt;
&lt;p&gt;This is a ...&lt;/p&gt;
&lt;div class="clear"&gt;&lt;/div&gt;

&lt;/div&gt;

&lt;/div&gt;</pre>
<p>Nothing special here. Lets continue with the PHP backend.</p>
<div id="attachment_455" class="wp-caption alignnone" style="width: 610px"><img class="size-full wp-image-455" title="The login system" src="http://tutorialzine.com/wp-content/uploads/2009/10/i21.png" alt="The login system" width="600" height="230" /><p class="wp-caption-text">The login system</p></div>
<h3>Step 3 &#8211; PHP</h3>
<p>It is time to convert the form into a complete registration and login system. To achieve it, we will need more than the usual amount of PHP. I&#8217;ll divide the code into two parts.</p>
<p>If you plan to add more code, it would be a good idea to split it into several files which are included when needed. This aids the development of large projects and allows code reuse in different parts of a site.</p>
<p>But lets see how we&#8217;ve done it here.</p>
<h4>demo.php</h4>
<pre class="brush:php">define('INCLUDE_CHECK',true);

require 'connect.php';
require 'functions.php';

// Those two files can be included only if INCLUDE_CHECK is defined

session_name('tzLogin');
// Starting the session

session_set_cookie_params(2*7*24*60*60);
// Making the cookie live for 2 weeks

session_start();

if($_SESSION['id'] &amp;&amp; !isset($_COOKIE['tzRemember']) &amp;&amp; !$_SESSION['rememberMe'])
{
	// If you are logged in, but you don't have the tzRemember cookie (browser restart)
	// and you have not checked the rememberMe checkbox:

	$_SESSION = array();
	session_destroy();

	// Destroy the session
}

if(isset($_GET['logoff']))
{
	$_SESSION = array();
	session_destroy();
	header("Location: demo.php");
	exit;
}

if($_POST['submit']=='Login')
{
	// Checking whether the Login form has been submitted

	$err = array();
	// Will hold our errors

	if(!$_POST['username'] || !$_POST['password'])
		$err[] = 'All the fields must be filled in!';

	if(!count($err))
	{
		$_POST['username'] = mysql_real_escape_string($_POST['username']);
		$_POST['password'] = mysql_real_escape_string($_POST['password']);
		$_POST['rememberMe'] = (int)$_POST['rememberMe'];

		// Escaping all input data

		$row = mysql_fetch_assoc(mysql_query("SELECT id,usr FROM tz_members WHERE usr='{$_POST['username']}' AND pass='".md5($_POST['password'])."'"));

		if($row['usr'])
		{
			// If everything is OK login

			$_SESSION['usr']=$row['usr'];
			$_SESSION['id'] = $row['id'];
			$_SESSION['rememberMe'] = $_POST['rememberMe'];

			// Store some data in the session

			setcookie('tzRemember',$_POST['rememberMe']);
			// We create the tzRemember cookie
		}
		else $err[]='Wrong username and/or password!';
	}

	if($err)
		$_SESSION['msg']['login-err'] = implode('&lt;br /&gt;',$err);
		// Save the error messages in the session

	header("Location: demo.php");
	exit;
}</pre>
<p>Here the <strong>tzRemember</strong> cookie acts as a control whether we should log-off users that have not marked the &#8220;remember me&#8221; checkbox. If the cookie is not present (due to browser restart) and the visitor has not checked the remember me option, we destroy the session.</p>
<p>The session itself is kept alive for two weeks (as set by <strong>session_set_cookie_params</strong>).</p>
<p>Lets see the second part of <strong>demo.php</strong>.</p>
<pre class="brush:php">else if($_POST['submit']=='Register')
{
	// If the Register form has been submitted
	$err = array();

	if(strlen($_POST['username'])&lt;4 || strlen($_POST['username'])&gt;32)
	{
		$err[]='Your username must be between 3 and 32 characters!';
	}

	if(preg_match('/[^a-z0-9\-\_\.]+/i',$_POST['username']))
	{
		$err[]='Your username contains invalid characters!';
	}

	if(!checkEmail($_POST['email']))
	{
		$err[]='Your email is not valid!';
	}

	if(!count($err))
	{
		// If there are no errors
		$pass = substr(md5($_SERVER['REMOTE_ADDR'].microtime().rand(1,100000)),0,6);
		// Generate a random password

		$_POST['email'] = mysql_real_escape_string($_POST['email']);
		$_POST['username'] = mysql_real_escape_string($_POST['username']);
		// Escape the input data

		mysql_query("	INSERT INTO tz_members(usr,pass,email,regIP,dt)
					VALUES(
					'".$_POST['username']."',
					'".md5($pass)."',
					'".$_POST['email']."',
					'".$_SERVER['REMOTE_ADDR']."',
					NOW()
		)");

		if(mysql_affected_rows($link)==1)
		{
			send_mail(	'demo-test@tutorialzine.com',
					$_POST['email'],
					'Registration System Demo - Your New Password',
					'Your password is: '.$pass);
					$_SESSION['msg']['reg-success']='We sent you an email with your new password!';
		}
		else $err[]='This username is already taken!';
	}

	if(count($err))
	{
		$_SESSION['msg']['reg-err'] = implode('&lt;br /&gt;',$err);
	}

	header("Location: demo.php");
	exit;
}

$script = '';
if($_SESSION['msg'])
{
	// The script below shows the sliding panel on page load
	$script = '
	&lt;script type="text/javascript"&gt;
	$(function(){
		$("div#panel").show();
		$("#toggle a").toggle();
	});
	&lt;/script&gt;';
}</pre>
<p>We store all the encountered errors in an <strong>$err</strong> array, which is later assigned to a <strong>$_SESSION </strong>variable. This allows it to be accessible after a browser redirect.</p>
<p>You may have noticed on some sites, that when you submit a form and later refresh the page, the data is sent all over again. This could become problematic as it could lead to a double registrations and unnecessary server load.</p>
<p>We use the header function to prevent this, by redirecting the browser to the same page. This starts a fresh view of the page, without the browser associating it with a form submit. The result is that, on page refresh, no data is sent.</p>
<p>But as we use <strong>$_SESSION</strong> to store all the encountered errors it is important that we <strong>unset</strong> these variables, once we show the errors to the user. Otherwise they will be shown on every page view (the highlighted lines on the XHTML part of the tutorial).</p>
<p>Also notice how we create an additional script (lines 60-70 of the second part of the PHP code) which shows the panel on page load, so that the messages are visible to the user.</p>
<p>Now lets take a look at the CSS.</p>
<div id="attachment_454" class="wp-caption alignnone" style="width: 610px"><img class="size-full wp-image-454 " title="The registration / login system" src="http://tutorialzine.com/wp-content/uploads/2009/10/i12.png" alt="The registration / login system" width="600" height="460" /><p class="wp-caption-text">The registration / login system</p></div>
<h3>Step 4 &#8211; CSS</h3>
<p>The sliding panel comes with its own style sheet. This means we are only left with creating the page styles.</p>
<h4>demo.css</h4>
<pre class="brush:css">body,h1,h2,h3,p,quote,small,form,input,ul,li,ol,label{
	/* The reset rules */
	margin:0px;
	padding:0px;
}

body{
	color:#555555;
	font-size:13px;
	background: #eeeeee;
	font-family:Arial, Helvetica, sans-serif;
	width: 100%;
}

h1{
	font-size:28px;
	font-weight:bold;
	font-family:"Trebuchet MS",Arial, Helvetica, sans-serif;
	letter-spacing:1px;
}

h2{
	font-family:"Arial Narrow",Arial,Helvetica,sans-serif;
	font-size:10px;
	font-weight:normal;
	letter-spacing:1px;
	padding-left:2px;
	text-transform:uppercase;
	white-space:nowrap;
	margin-top:4px;
	color:#888888;
}

#main p{
	padding-bottom:8px;
}

.clear{
	clear:both;
}

#main{
	width:800px;
	/* Centering it in the middle of the page */
	margin:60px auto;
}

.container{
	margin-top:20px;

	background:#FFFFFF;
	border:1px solid #E0E0E0;
	padding:15px;

	/* Rounded corners */
	-moz-border-radius:20px;
	-khtml-border-radius: 20px;
	-webkit-border-radius: 20px;
	border-radius:20px;
}

.err{
	color:red;
}

.success{
	color:#00CC00;
}

a, a:visited {
	color:#00BBFF;
	text-decoration:none;
	outline:none;
}

a:hover{
	text-decoration:underline;
}

.tutorial-info{
	text-align:center;
	padding:10px;
}</pre>
<h3>Step 5 &#8211; jQuery</h3>
<p>The sliding panel comes with its own jQuery files.</p>
<h4>demo.php</h4>
<pre class="brush:html">&lt;script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"&gt;&lt;/script&gt;

&lt;!-- PNG FIX for IE6 --&gt;
&lt;!-- http://24ways.org/2007/supersleight-transparent-png-in-ie6 --&gt;
&lt;!--[if lte IE 6]&gt;
&lt;script type="text/javascript" src="login_panel/js/pngfix/supersleight-min.js"&gt;&lt;/script&gt;
&lt;![endif]--&gt;

&lt;script src="login_panel/js/slide.js" type="text/javascript"&gt;&lt;/script&gt;

&lt;?php echo $script; ?&gt;</pre>
<p>First we include the jQuery library from Google&#8217;s CDN. Later comes a special fix for IE6 PNG transparency issues and lastly the panel&#8217;s script is included.</p>
<p>At the bottom of the page is the $script variable &#8211; it shows the panel on page load if needed.</p>
<p>With this our cool login system is complete!</p>
<h3>Conclusion</h3>
<p>Today we learned how to use a fantastic form component and turn it into a functional log in / registration system.</p>
<p>You are free to built upon this code and modify it any way you see fit.</p>
<div><table border=0 bgcolor=#ffffff> <td><iframe src='http://digg.com/api/diggthis.php?w=new&amp;u=http%3A%2F%2Ftutorialzine.com%2F2009%2F10%2Fcool-login-system-php-jquery%2F&amp;t=Making+A+Cool+Login+System+With+PHP%2C+MySQL+%26+jQuery&amp;s=normal' height='80' width='52' frameborder='0' scrolling='no'></iframe></td> <td><iframe src='http://www.reddit.com/button_content?newwindow=1&amp;url=http%3A%2F%2Ftutorialzine.com%2F2009%2F10%2Fcool-login-system-php-jquery%2F&amp;title=Making+A+Cool+Login+System+With+PHP%2C+MySQL+%26+jQuery&amp;t=2 ' height='80' width='52' scrolling='no' frameborder='0' ></iframe></td> <td><iframe src='http://widgets.dzone.com/links/widgets/zoneit.html?url=http%3A%2F%2Ftutorialzine.com%2F2009%2F10%2Fcool-login-system-php-jquery%2F&amp;title=Making+A+Cool+Login+System+With+PHP%2C+MySQL+%26+jQuery&amp;t=1 ' height='80' width='52' scrolling='no' frameborder='0' ></iframe></td> <td><iframe src='http://api.tweetmeme.com/button.js?url=http%3A%2F%2Ftutorialzine.com%2F2009%2F10%2Fcool-login-system-php-jquery%2F&amp;source=Tutorialzine&amp;style=normal ' height='61' width='50' frameborder='0' scrolling='no'></iframe></td> <td><script type="text/javascript"> var fbShare = {url: 'http://tutorialzine.com/2009/10/cool-login-system-php-jquery/',size:'large'}</script><script type="text/javascript" src="http://widgets.fbshare.me/files/fbshare.js"></script></td></table></div><!-- Generated by Digg Digg plugin, 
    Author : Yong Mook Kim
    Website : http://www.mkyong.com/blog/digg-digg-wordpress-plugin/
	--><img src="http://feeds.feedburner.com/~r/Tutorialzine/~4/ZdWYt_XbS2E" height="1" width="1"/>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:36:"http://wellformedweb.org/CommentAPI/";a:1:{s:10:"commentRss";a:1:{i:0;a:5:{s:4:"data";s:66:"http://tutorialzine.com/2009/10/cool-login-system-php-jquery/feed/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:38:"http://purl.org/rss/1.0/modules/slash/";a:1:{s:8:"comments";a:1:{i:0;a:5:{s:4:"data";s:2:"43";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:42:"http://rssnamespace.org/feedburner/ext/1.0";a:1:{s:8:"origLink";a:1:{i:0;a:5:{s:4:"data";s:61:"http://tutorialzine.com/2009/10/cool-login-system-php-jquery/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}}}i:4;a:6:{s:4:"data";s:44:"
		
		
		
		
		
				
		

		
		
			
			
		
		";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";s:5:"child";a:6:{s:0:"";a:7:{s:5:"title";a:1:{i:0;a:5:{s:4:"data";s:23:"A jQuery Twitter Ticker";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"link";a:1:{i:0;a:5:{s:4:"data";s:59:"http://feedproxy.google.com/~r/Tutorialzine/~3/E-_7Mczc_6g/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"comments";a:1:{i:0;a:5:{s:4:"data";s:63:"http://tutorialzine.com/2009/10/jquery-twitter-ticker/#comments";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:7:"pubDate";a:1:{i:0;a:5:{s:4:"data";s:31:"Sat, 10 Oct 2009 13:16:35 +0000";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"category";a:2:{i:0;a:5:{s:4:"data";s:3:"CSS";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:1;a:5:{s:4:"data";s:6:"jQuery";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"guid";a:1:{i:0;a:5:{s:4:"data";s:30:"http://tutorialzine.com/?p=434";s:7:"attribs";a:1:{s:0:"";a:1:{s:11:"isPermaLink";s:5:"false";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:11:"description";a:1:{i:0;a:5:{s:4:"data";s:116:"In this tutorial we are going to create a pure jQuery &#038; CSS twitter ticker which utilizes Twitter's Search API.";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:32:"http://purl.org/dc/elements/1.1/";a:1:{s:7:"creator";a:1:{i:0;a:5:{s:4:"data";s:6:"Martin";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:40:"http://purl.org/rss/1.0/modules/content/";a:1:{s:7:"encoded";a:1:{i:0;a:5:{s:4:"data";s:13374:"<h3>Introduction</h3>
<p>In this tutorial we are going to create a pure jQuery &amp; CSS twitter ticker which utilizes Twitter&#8217;s Search API. It will show your or your friends&#8217; latest tweets, and will not require any server side code  or databases. As a result, the ticker will be easily included into any web page and easily modified to your likings.</p>
<h3>Step 1 &#8211; XHTML</h3>
<p>The XHTML part is quite straightforward.</p>
<h4>demo.html</h4>
<pre class="brush:html">&lt;div id="twitter-ticker"&gt;
&lt;!-- Twitter container, hidden by CSS and shown if JS is present --&gt;

	&lt;div id="top-bar"&gt;
	&lt;!-- This contains the title and icon --&gt;

	&lt;div id="twitIcon"&gt;&lt;img src="img/twitter_64.png" width="64" height="64" alt="Twitter icon" /&gt;&lt;/div&gt;
	&lt;!-- The twitter icon --&gt;

	&lt;h2 class="tut"&gt;My tweets&lt;/h2&gt;
	&lt;!-- Title --&gt;

	&lt;/div&gt;

	&lt;div id="tweet-container"&gt;&lt;img id="loading" src="img/loading.gif" width="16" height="11" alt="Loading.." /&gt;&lt;/div&gt;
	&lt;!-- The loading gif animation - hidden once the tweets are loaded --&gt;

	&lt;div id="scroll"&gt;&lt;/div&gt;
	&lt;!-- Container for the tweets --&gt;

&lt;/div&gt;</pre>
<p>The twitter ticker operates only if <strong>JavaScript</strong> is present and <strong>enabled</strong>. That is why we are hiding it in the CSS and showing it with jQuery. This will insure that it is only shown if working properly.</p>
<p>In the design I used an <a href="http://freakyframes.deviantart.com/art/Twitter-Bird-127757230" target="_blank">amazing twitter icon</a> by <a href="http://freakyframes.deviantart.com/art/Twitter-Bird-127757230" target="_blank">freakyframes</a>.</p>
<p>Lets move to the CSS</p>
<div id="attachment_438" class="wp-caption alignnone" style="width: 610px"><img class="size-full wp-image-438" title="A jQuery Twitter Ticker" src="http://tutorialzine.com/wp-content/uploads/2009/10/i2.jpg" alt="A jQuery Twitter Ticker" width="600" height="230" /><p class="wp-caption-text">A jQuery Twitter Ticker</p></div>
<h3>Step 2 &#8211; CSS</h3>
<p>This is the place you should start from if you plan to modify the demo.</p>
<h4>demo.css</h4>
<pre class="brush:css">body,h1,h2,h3,p,quote,small,form,input,ul,li,ol,label{
	/* Resetting some of the page elements */
	margin:0px;
	padding:0px;
}

h2.tut{
	/* This is the "MY TWEETS" title */
	color:white;
	font-family:"Myriad Pro", Arial, Helvetica, sans-serif;
	font-size:16px;
	padding:12px 0 0 58px;
	text-transform:uppercase;

	/* The CSS3 text-shadow property */
	text-shadow:2px 1px 6px #333;
}

#twitter-ticker{
	/* Styling the ticker */
	width:200px;
	height:300px;
	background:url(img/slickbg.png) no-repeat #f5f5f5;
	color:#666666;
	display:none;

	/* Rounded corners */
	-moz-border-radius:10px 10px 6px 6px;
	-khtml-border-radius: 6px;
	-webkit-border-radius: 6px;
	border-radius:6px;

	text-align:left;
}

#tweet-container{
	/* This is where the tweets are inserted */
	height:230px;
	width:auto;
	overflow:hidden;
}

#twitIcon{
	/* Positioning the icon holder absolutely and moving it to the upper-left */
	position:absolute;
	top:-25px;
	left:-10px;
	width:64px;
	height:64px;
}

#top-bar{
	height:45px;
	background:url(img/top_bar.png) repeat-x;
	border-bottom:1px solid white;
	position:relative;
	margin-bottom:8px;

	/* Rounding the top part of the ticker, works only in Firefox unfortunately */
	-moz-border-radius:6px 6px 0 0;
}

.tweet{
	/* Affects the tweets */
	padding:5px;
	margin:0 8px 8px;

	border:1px solid #F0F0F0;
	background:url(img/transparent.png);

	width:auto;
	overflow:hidden;
}

.tweet .avatar,
.tweet .user,
.tweet .time{
	float:left;
}

.tweet .time{
	text-transform:uppercase;
	font-size:10px;
	color:#AAAAAA;
	white-space:nowrap;
}

.tweet .avatar img{
	width:36px;
	height:36px;
	border:2px solid #eeeeee;
	margin:0 5px 5px 0;
}

.tweet .txt{
	/* Using the text container to clear the floats */
	clear:both;
}

.tweet .user{
	font-weight:bold;
}

a, a:visited {
	/* Styling the links */
	color:#00BBFF;
	text-decoration:none;
	outline:none;
}

a:hover{
	text-decoration:underline;
}

#loading{
	/* The loading gif animation */
	margin:100px 95px;
}</pre>
<p>And as any experienced front-end developer can assure you, the code is not complete without some special IE6 treatment.</p>
<pre class="brush:html">&lt;!--[if lt IE 7]&gt;

&lt;style type="text/css"&gt;
div.tweet {
	background:none;
	border:none;
}

div#twitIcon{
	filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src=img/twitter_64.png, sizingMethod=crop);
}

div#twitIcon img{
	display:none;
}

&lt;/style&gt;
&lt;![endif]--&gt;</pre>
<p>This will take care of the PNG transparency issues in IE6.</p>
<p>Below you can see  a detailed explanation of the twitter ticker.</p>
<div id="attachment_437" class="wp-caption alignnone" style="width: 610px"><img class="size-full wp-image-437" title="The Twitter Ticker Explained" src="http://tutorialzine.com/wp-content/uploads/2009/10/i1.png" alt="The Twitter Ticker Explained" width="600" height="460" /><p class="wp-caption-text">The Twitter Ticker Explained</p></div>
<p>Now lets take a look at the jQuery source.</p>
<h3>Step 3 &#8211; jQuery</h3>
<p>Being front-end only, the widget takes advantage of the Twitter&#8217;s Search API. This a really simple solution for fetching data from the twitter&#8217;s infrastructure without the need of any server-side code or databases.</p>
<p>Here is how it works:</p>
<ol>
<li>The ticker loads;</li>
<li>JS builds the twitter search api URL from the provided twitter usernames (in the <strong>tweetUsers</strong> array) and a name of a callback function (<strong>TweetTick</strong> in our case);</li>
<li>It includes a <strong>script file</strong> in the page, using the above URL as its <strong>src</strong>;</li>
<li>The script in turn calls the callback function and provides a special object containing all the tweets as a parameter;</li>
<li>The callback function uses this object to build and show the tweets;</li>
</ol>
<p>As the search api script is called after page load, there is no waiting for the script to load and hanging of the page in the mean time. This is a true asynchronous javascript solution &#8211; a great alternative to AJAX.</p>
<p>Now here is the code that makes this happen:</p>
<h4>demo.html</h4>
<pre class="brush:html">&lt;link rel="stylesheet" type="text/css" href="demo.css" /&gt;
&lt;link rel="stylesheet" type="text/css" href="jScrollPane/jScrollPane.css" /&gt;

&lt;script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="jScrollPane/jquery.mousewheel.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="jScrollPane/jScrollPane-1.2.3.min.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="script.js"&gt;&lt;/script&gt;</pre>
<p>First, we include our <strong>demo.css</strong> and <strong>jScrollPane.css</strong>. These style the ticker.</p>
<p>Later we include the <strong>jQuery library</strong> from Google&#8217;s CDN, the <strong>mousewheel</strong> plugin and the <strong>jScrollPane</strong> plugin.</p>
<p>Last is <strong>script.js</strong>, which is shown below:</p>
<h4>script.js</h4>
<pre class="brush:js">var tweetUsers = ['tutorialzine','TechCrunch',
'smashingmag','mashable'];
// The twitter accounts that will be included in the ticker

var buildString = "";

$(document).ready(function(){

	// After the page is loaded

	$('#twitter-ticker').slideDown('slow');
	// Show the ticker

	for(var i=0;i&lt;tweetUsers.length;i++)
	{
		// Build the search api parameters
		if(i!=0) buildString+='+OR+';
		buildString+='from:'+tweetUsers[i];
	}

	var fileref = document.createElement('script');
	// Creating a new script element

	fileref.setAttribute("type","text/javascript");
	fileref.setAttribute("src", "http://search.twitter.com/search.json?q="+buildString+"&amp;callback=TweetTick&amp;rpp=50");
	// Setting its src to the search API URL; We provide TweetTick as a callback

	document.getElementsByTagName("head")[0].appendChild(fileref);
	// Appending it to the head of the page and thus executing it
});

function TweetTick(ob)
{
	// This is the callback function

	var container=$('#tweet-container');
	container.html('');
	// Removing the loading gif animation

	$(ob.results).each(function(el){

		// ob contains all the tweets

		var str = '	&lt;div class="tweet"&gt;\
		&lt;div class="avatar"&gt;&lt;a href="http://twitter.com/'+this.from_user+'" target="_blank"&gt;&lt;img src="'+this.profile_image_url+'" alt="'+this.from_user+'" /&gt;&lt;/a&gt;&lt;/div&gt;\
		&lt;div class="user"&gt;&lt;a href="http://twitter.com/'+this.from_user+'" target="_blank"&gt;'+this.from_user+'&lt;/a&gt;&lt;/div&gt;\
		&lt;div class="time"&gt;'+relativeTime(this.created_at)+'&lt;/div&gt;\
		&lt;div class="txt"&gt;'+formatTwitString(this.text)+'&lt;/div&gt;\
		&lt;/div&gt;';

		container.append(str);
		// Adding the tweet to the container
	});

	container.jScrollPane();
	// After all the tweets have been added, create the slidebar
}

function formatTwitString(str)
{
	// This function formats the tweet body text

	str=' '+str;

	str = str.replace(/((ftp|https?):\/\/([-\w\.]+)+(:\d+)?(\/([\w/_\.]*(\?\S+)?)?)?)/gm,'&lt;a href="$1" target="_blank"&gt;$1&lt;/a&gt;');
	// The tweets arrive as plain text, so we replace all the textual URLs with hyperlinks

	str = str.replace(/([^\w])\@([\w\-]+)/gm,'$1@&lt;a href="http://twitter.com/$2" target="_blank"&gt;$2&lt;/a&gt;');
	// Replace the mentions

	str = str.replace(/([^\w])\#([\w\-]+)/gm,'$1&lt;a href="http://twitter.com/search?q=%23$2" target="_blank"&gt;#$2&lt;/a&gt;');
	// Replace the hashtags

	return str;
}

function relativeTime(pastTime)
{
	// Generate a JavaScript relative time for the tweets

	var origStamp = Date.parse(pastTime);
	var curDate = new Date();
	var currentStamp = curDate.getTime();
	var difference = parseInt((currentStamp - origStamp)/1000);

	if(difference &lt; 0) return false;

	if(difference &lt;= 5)			return "Just now";
	if(difference &lt;= 20)			return "Seconds ago";
	if(difference &lt;= 60)			return "A minute ago";
	if(difference &lt; 3600)		return parseInt(difference/60)+" minutes ago";
	if(difference &lt;= 1.5*3600) 	return "One hour ago";
	if(difference &lt; 23.5*3600)	return Math.round(difference/3600)+" hours ago";
	if(difference &lt; 1.5*24*3600)	return "One day ago";

	// If the tweet is older than a day, show an absolute date/time value;

	var dateArr = pastTime.split(' ');

	return dateArr[4].replace(/\:\d+$/,'')+' '+dateArr[2]+' '+dateArr[1]+
	(dateArr[3]!=curDate.getFullYear()?' '+dateArr[3]:'');
}</pre>
<p>You can see that on line 55 we use the <a href="http://www.kelvinluck.com/assets/jquery/jScrollPane/jScrollPane.html" target="_blank">jScrollPane plugin</a>. It creates a handy scrollbar to the right of the tweets. Thanks to the mouseWheel plugin it is also able to detect and scroll the page on mouse wheel movements.</p>
<p><strong>To change</strong> the twitter accounts that are shown in the ticker, you&#8217;ll need to modify the <strong>tweetUsers</strong> array.</p>
<p>If you provide two or more twitter names, their tweets will be shown together. Only the <strong>50 most recent</strong> tweets from the past <strong>7 days</strong> will be returned.</p>
<p>It is worth noting that Twitter puts a maximum limit to the search api&#8217;s URLs of <strong>140 characters</strong>. This would be sufficient for about 7 twitter user names.</p>
<p>With this the twitter ticker is complete!</p>
<h3>Conclusion</h3>
<p>Today we used the Twitter Search API to build a handy jQuery Ticker that will show your latest tweets on your blog or site. Possibilities are endless, because no server side code or databases are required and you are free to modify the code any way you see fit.</p>
<div><table border=0 bgcolor=#ffffff> <td><iframe src='http://digg.com/api/diggthis.php?w=new&amp;u=http%3A%2F%2Ftutorialzine.com%2F2009%2F10%2Fjquery-twitter-ticker%2F&amp;t=A+jQuery+Twitter+Ticker&amp;s=normal' height='80' width='52' frameborder='0' scrolling='no'></iframe></td> <td><iframe src='http://www.reddit.com/button_content?newwindow=1&amp;url=http%3A%2F%2Ftutorialzine.com%2F2009%2F10%2Fjquery-twitter-ticker%2F&amp;title=A+jQuery+Twitter+Ticker&amp;t=2 ' height='80' width='52' scrolling='no' frameborder='0' ></iframe></td> <td><iframe src='http://widgets.dzone.com/links/widgets/zoneit.html?url=http%3A%2F%2Ftutorialzine.com%2F2009%2F10%2Fjquery-twitter-ticker%2F&amp;title=A+jQuery+Twitter+Ticker&amp;t=1 ' height='80' width='52' scrolling='no' frameborder='0' ></iframe></td> <td><iframe src='http://api.tweetmeme.com/button.js?url=http%3A%2F%2Ftutorialzine.com%2F2009%2F10%2Fjquery-twitter-ticker%2F&amp;source=Tutorialzine&amp;style=normal ' height='61' width='50' frameborder='0' scrolling='no'></iframe></td> <td><script type="text/javascript"> var fbShare = {url: 'http://tutorialzine.com/2009/10/jquery-twitter-ticker/',size:'large'}</script><script type="text/javascript" src="http://widgets.fbshare.me/files/fbshare.js"></script></td></table></div><!-- Generated by Digg Digg plugin, 
    Author : Yong Mook Kim
    Website : http://www.mkyong.com/blog/digg-digg-wordpress-plugin/
	--><img src="http://feeds.feedburner.com/~r/Tutorialzine/~4/E-_7Mczc_6g" height="1" width="1"/>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:36:"http://wellformedweb.org/CommentAPI/";a:1:{s:10:"commentRss";a:1:{i:0;a:5:{s:4:"data";s:59:"http://tutorialzine.com/2009/10/jquery-twitter-ticker/feed/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:38:"http://purl.org/rss/1.0/modules/slash/";a:1:{s:8:"comments";a:1:{i:0;a:5:{s:4:"data";s:2:"30";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:42:"http://rssnamespace.org/feedburner/ext/1.0";a:1:{s:8:"origLink";a:1:{i:0;a:5:{s:4:"data";s:54:"http://tutorialzine.com/2009/10/jquery-twitter-ticker/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}}}i:5;a:6:{s:4:"data";s:50:"
		
		
		
		
		
				
		
		
		

		
		
			
			
		
		";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";s:5:"child";a:6:{s:0:"";a:7:{s:5:"title";a:1:{i:0;a:5:{s:4:"data";s:29:"Making A Slick Content Slider";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"link";a:1:{i:0;a:5:{s:4:"data";s:59:"http://feedproxy.google.com/~r/Tutorialzine/~3/2PCQPjr7D2s/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"comments";a:1:{i:0;a:5:{s:4:"data";s:69:"http://tutorialzine.com/2009/10/slick-content-slider-jquery/#comments";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:7:"pubDate";a:1:{i:0;a:5:{s:4:"data";s:31:"Fri, 02 Oct 2009 17:15:12 +0000";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"category";a:4:{i:0;a:5:{s:4:"data";s:3:"CSS";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:1;a:5:{s:4:"data";s:3:"PHP";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:2;a:5:{s:4:"data";s:9:"Tutorials";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:3;a:5:{s:4:"data";s:6:"jQuery";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"guid";a:1:{i:0;a:5:{s:4:"data";s:30:"http://tutorialzine.com/?p=422";s:7:"attribs";a:1:{s:0:"";a:1:{s:11:"isPermaLink";s:5:"false";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:11:"description";a:1:{i:0;a:5:{s:4:"data";s:207:"In this tutorial we are going to make a slick content slider with the help of jQuery and the MopSlider plugin. The slider is going to be generated with PHP and we are using a plain txt file as a data source.";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:32:"http://purl.org/dc/elements/1.1/";a:1:{s:7:"creator";a:1:{i:0;a:5:{s:4:"data";s:6:"Martin";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:40:"http://purl.org/rss/1.0/modules/content/";a:1:{s:7:"encoded";a:1:{i:0;a:5:{s:4:"data";s:10430:"<h3>Introduction</h3>
<p>Web masters constantly search for ways to optimize the way content is presented on their sites. With the advent of terms like &#8220;above the fold&#8221; it is ever so important to provide eye-catching and functional user interfaces.</p>
<p>In this tutorial we are going to make a slick content slider for a computer shop, with the help of jQuery and the <a href="http://www.mopstudio.jp/mopSlider2descrip.html" target="_blank">MopSlider plugin</a>. The slider is going to be generated with PHP and we are using a plain txt file as a data source for the notebook configurations.</p>
<h3>Step 1 &#8211; Data Source</h3>
<p>When designing a new feature you have many choices on how to store the needed data. For the purposes of this tutorial, we are putting all the laptop configurations into a single plain txt file. This strategy is perfect for simple read-only web apps, which operate with less than 100 items.</p>
<p>The advantages over a regular MySQL data storage is that you need only a text editor to modify the data and add new models, not to mention the greater level of simplicity in the implementation.</p>
<p>Below is a sample structure of the text file.</p>
<h4>db/slider.db.txt</h4>
<pre class="brush:html">Product Model | Product Description | Price | Path To Image | URL
Second Product | Description | Price | Path To Image | URL
Third Product | Description | Price | Path To Image | URL</pre>
<p>Every item occupies its own row. The number of rows is the number of items in the content slider.</p>
<p>There are several data columns, divided by <strong>“|”</strong>. These are the <strong>model</strong>, <strong>description</strong>, <strong>price</strong>, <strong>product image</strong> and a <strong>URL</strong> for more information. You can modify this structure by adding or removing columns, but remember to apply the changes to the <strong>demo.php loop</strong>, which we will take a look at in a moment.</p>
<p>This file is located in the <strong>db</strong> folder. To prevent our textual database from being typed in and opened in a web browser, we will have to add a special <strong>.htaccess</strong> file. This is executed by the Apache web server and the rules it contains are applied to the current directory.</p>
<h4>db/.htaccess</h4>
<pre class="brush:html"># This will prevent opening the db dir in a browser

deny from all

# Will return a 403 error</pre>
<p>This line prevents the directory and all its files  from being opened in a web browser.</p>
<p>Now lets take a look at the XHTML.</p>
<div id="attachment_426" class="wp-caption alignnone" style="width: 610px"><img class="size-full wp-image-426" title="A slick content slider" src="http://tutorialzine.com/wp-content/uploads/2009/10/i1.jpg" alt="A slick content slider" width="600" height="230" /><p class="wp-caption-text">A slick content slider</p></div>
<h3>Step 2 &#8211; XHTML</h3>
<p>The markup of the page is pretty straightforward.</p>
<pre class="brush:html">&lt;div id="main"&gt;	&lt;!-- The main container --&gt;
	&lt;div class="titles"&gt;	&lt;!-- Placeholder for the headings --&gt;
	&lt;h1&gt;Notebooks&lt;/h1&gt;
	&lt;h2&gt;Fresh on the market&lt;/h2&gt;
	&lt;/div&gt;

	&lt;div class="container"&gt;	&lt;!-- Styled and rounded --&gt;
		&lt;div id="slider"&gt;	&lt;!-- Contains the generated products --&gt;
		&lt;?=$products?&gt;	&lt;!-- PHP var that holds the products --&gt;
		&lt;/div&gt;
		&lt;div class="clear"&gt;&lt;/div&gt;
		&lt;!-- Clearing the floats, the old-fashioned way --&gt;
	&lt;/div&gt;
&lt;/div&gt;</pre>
<p>It is pretty much self explanatory. Now lets move to our CSS.</p>
<h3>Step 3 &#8211; CSS</h3>
<p>It is CSS that made it possible to write such clean and simple XHTML as above.</p>
<h4>demo.css</h4>
<pre class="brush:css">body,h1,h2,h3,p,quote,small,form,input,ul,li,ol,label{
	/* resetting some of the page elements */
	margin:0px;
	padding:0px;
}

body{
	/* styling the body */
	color:white;
	font-size:13px;
	background: url(img/bg.png);
	font-family:Arial, Helvetica, sans-serif;
}

h1{
	color:white;
	font-size:28px;
	font-weight:bold;
	font-family:"Trebuchet MS",Arial, Helvetica, sans-serif;
}

h2{
	font-family:"Arial Narrow",Arial,Helvetica,sans-serif;
	font-size:10px;
	font-weight:normal;
	letter-spacing:1px;
	padding-left:2px;
	text-transform:uppercase;
	white-space:nowrap;
}

.clear{
	/* Clear the floats */
	clear:both;
}

#main{
	/* The main container */
	width:800px;
	margin:0 auto;
}

.container,.titles{
	/* These classes share some common rules */
	color:white;
	margin-top:30px;
	width:100%;

	/* Hiding everything that overflows off the sides */
	overflow:hidden;

	background:url(img/bg_dark.png) #28313b;
	padding:20px 10px 10px;

	/* CSS rounded corners */
	-moz-border-radius:12px;
	-khtml-border-radius: 12px;
	-webkit-border-radius: 12px;
	border-radius:12px;
}

.titles{
	width:140px;
	padding:10px 15px;
	height:55px;
}

.product{
	/* The products class */
	width:370px;
	height:150px;
	background:url(img/product_bg.png) repeat-x;
	padding-top:10px;

	-moz-border-radius:12px;
	-khtml-border-radius: 12px;
	-webkit-border-radius: 12px;
	border-radius:12px;
}

.product .pic{
	/* The product image */
	float:left;
	width:128px;
	height:128px;
	padding:0 10px 5px;
	margin-top:-15px;
}

.product .link,.product .price{
	/* Common rules */
	font-size:10px;
	text-transform:uppercase;
	padding:4px 0;
}

.product .price{
	/* Custom rule */
	color:#CCCCCC;
}

.product .title{
	font-size:16px;
	font-weight:bold;
}

a, a:visited {
	/* Styling the hyperlink */
	color:#00BBFF;
	text-decoration:none;
	outline:none;
}

a:hover{
	/* The hover state */
	text-decoration:underline;
}</pre>
<p>Lets proceed with the next step.</p>
<div id="attachment_427" class="wp-caption alignnone" style="width: 610px"><img class="size-full wp-image-427" title="The slider explained" src="http://tutorialzine.com/wp-content/uploads/2009/10/i2.png" alt="The slider explained" width="600" height="460" /><p class="wp-caption-text">The slider explained</p></div>
<h3>Step 4 &#8211; jQuery</h3>
<p>Lets see what lays in the <strong>script.js</strong> file.</p>
<h4>script.js</h4>
<pre class="brush:js">$(document).ready(function(){

	/* After the page has finished loading */
	$("#slider").mopSlider({
		'w':800,
		'h':150,
		'sldW':500,
		'btnW':200,
		'itemMgn':20,
		'indi':"Slide To View More",
		'type':'tutorialzine',	/* A custom theme */
		'shuffle':0
	});

});</pre>
<p>You can see that on <strong>line 11</strong> we provide “<strong>tutorialzine</strong>” as a theme. What gives? The plugin comes loaded with two themes &#8211; <strong>paper</strong>, and <strong>black</strong>. Unfortunately neither of those seem suitable for the current page design. This is why I tweaked the plugin a little bit to enable this custom theme.</p>
<p>Unlike the ones built-in, this one hides all the graphics, rounded corners and backgrounds to leave only the sliding bar and the content. This enables us to skin it the way we like and integrate it into any page design, but you&#8217;ll have to remember to style it properly.</p>
<p>In this case we&#8217;ve styled the <strong>container</strong> div that holds the slider and it works just fine.</p>
<p>Lets move on to the PHP code.</p>
<h3>Step 5 &#8211; PHP</h3>
<p>PHP handles the important task of reading the <strong>slider.db.txt</strong> and populating the <strong>slider</strong> div with products. This happens in the beginning of <strong>demo.php</strong>.</p>
<h4>demo.php</h4>
<pre class="brush:php">$slides = file('db/slider.db.txt');
/* Read the file with file() - returns an array where */
/* every file row becomes a new array element */

$products='';
foreach($slides as $v)
{
	$data = preg_split('/\s*\|\s*/',$v);
	/* Split the file row by the vertical lines */
	/* Using preg_split to remove unnecessary spaces and tabulations */

	$products.='
	&lt;div class="product"&gt;
	&lt;div class="pic"&gt;&lt;img src="'.$data[3].'" width="128" height="128" alt="'.htmlspecialchars($data[0]).'" /&gt;&lt;/div&gt;
	&lt;div class="title"&gt;'.$data[0].'&lt;/div&gt;
	&lt;div class="price"&gt;$'.$data[2].'&lt;/div&gt;
	&lt;div class="description"&gt;'.$data[1].'&lt;/div&gt;
	&lt;div class="link"&gt;&lt;a href="'.$data[4].'" target="blank"&gt;Find out more&lt;/a&gt;&lt;/div&gt;
	&lt;div class="clear"&gt;&lt;/div&gt;
	&lt;/div&gt;';

	/* $data becomes an array with the product's properties */
}</pre>
<p>If you were to modify <strong>slider.db.txt,</strong> you would have to change the above loop so you can show the data where needed.</p>
<p>With this our content slider is complete!</p>
<h3>Conclusion</h3>
<p>Today we created a content slider, which will help you optimize your website’s real estate and serve as eye-candy for your visitors.</p>
<p>You are free to modify the code any way you see fit and integrate it into your site.</p>
<div><table border=0 bgcolor=#ffffff> <td><iframe src='http://digg.com/api/diggthis.php?w=new&amp;u=http%3A%2F%2Ftutorialzine.com%2F2009%2F10%2Fslick-content-slider-jquery%2F&amp;t=Making+A+Slick+Content+Slider&amp;s=normal' height='80' width='52' frameborder='0' scrolling='no'></iframe></td> <td><iframe src='http://www.reddit.com/button_content?newwindow=1&amp;url=http%3A%2F%2Ftutorialzine.com%2F2009%2F10%2Fslick-content-slider-jquery%2F&amp;title=Making+A+Slick+Content+Slider&amp;t=2 ' height='80' width='52' scrolling='no' frameborder='0' ></iframe></td> <td><iframe src='http://widgets.dzone.com/links/widgets/zoneit.html?url=http%3A%2F%2Ftutorialzine.com%2F2009%2F10%2Fslick-content-slider-jquery%2F&amp;title=Making+A+Slick+Content+Slider&amp;t=1 ' height='80' width='52' scrolling='no' frameborder='0' ></iframe></td> <td><iframe src='http://api.tweetmeme.com/button.js?url=http%3A%2F%2Ftutorialzine.com%2F2009%2F10%2Fslick-content-slider-jquery%2F&amp;source=Tutorialzine&amp;style=normal ' height='61' width='50' frameborder='0' scrolling='no'></iframe></td> <td><script type="text/javascript"> var fbShare = {url: 'http://tutorialzine.com/2009/10/slick-content-slider-jquery/',size:'large'}</script><script type="text/javascript" src="http://widgets.fbshare.me/files/fbshare.js"></script></td></table></div><!-- Generated by Digg Digg plugin, 
    Author : Yong Mook Kim
    Website : http://www.mkyong.com/blog/digg-digg-wordpress-plugin/
	--><img src="http://feeds.feedburner.com/~r/Tutorialzine/~4/2PCQPjr7D2s" height="1" width="1"/>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:36:"http://wellformedweb.org/CommentAPI/";a:1:{s:10:"commentRss";a:1:{i:0;a:5:{s:4:"data";s:65:"http://tutorialzine.com/2009/10/slick-content-slider-jquery/feed/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:38:"http://purl.org/rss/1.0/modules/slash/";a:1:{s:8:"comments";a:1:{i:0;a:5:{s:4:"data";s:2:"16";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:42:"http://rssnamespace.org/feedburner/ext/1.0";a:1:{s:8:"origLink";a:1:{i:0;a:5:{s:4:"data";s:60:"http://tutorialzine.com/2009/10/slick-content-slider-jquery/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}}}i:6;a:6:{s:4:"data";s:47:"
		
		
		
		
		
				
		
		

		
		
			
			
		
		";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";s:5:"child";a:6:{s:0:"";a:7:{s:5:"title";a:1:{i:0;a:5:{s:4:"data";s:25:"A Fancy AJAX Contact Form";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"link";a:1:{i:0;a:5:{s:4:"data";s:59:"http://feedproxy.google.com/~r/Tutorialzine/~3/i0cnqsuQJMc/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"comments";a:1:{i:0;a:5:{s:4:"data";s:60:"http://tutorialzine.com/2009/09/fancy-contact-form/#comments";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:7:"pubDate";a:1:{i:0;a:5:{s:4:"data";s:31:"Fri, 25 Sep 2009 14:15:59 +0000";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"category";a:3:{i:0;a:5:{s:4:"data";s:3:"CSS";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:1;a:5:{s:4:"data";s:3:"PHP";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:2;a:5:{s:4:"data";s:6:"jQuery";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"guid";a:1:{i:0;a:5:{s:4:"data";s:30:"http://tutorialzine.com/?p=406";s:7:"attribs";a:1:{s:0:"";a:1:{s:11:"isPermaLink";s:5:"false";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:11:"description";a:1:{i:0;a:5:{s:4:"data";s:197:"In this tutorial we are going to make an AJAX contact form which leverages modern web development techniques. We are using PHP, CSS and jQuery with the help of JQtransform and formValidator plugin.";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:32:"http://purl.org/dc/elements/1.1/";a:1:{s:7:"creator";a:1:{i:0;a:5:{s:4:"data";s:6:"Martin";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:40:"http://purl.org/rss/1.0/modules/content/";a:1:{s:7:"encoded";a:1:{i:0;a:5:{s:4:"data";s:20849:"<h3>Introduction</h3>
<p>Providing a simple and reliable means of feedback from site visitors is a crucial part of any web presence. The most simple and common feedback channel are contact forms.</p>
<p>In this tutorial we are going to make an AJAX contact form which leverages modern web development techniques.<br />
We are using PHP, CSS and jQuery with the help of the <a href="http://www.position-absolute.com/articles/jquery-form-validator-because-form-validation-is-a-mess/" target="_blank">formValidator</a> plugin for form validation and the <a href="http://www.dfc-e.com/metiers/multimedia/opensource/jqtransform/" target="_blank">JQTransform</a> plugin, which will style all the input fields and buttons of the form. In addition we are using the <a href="http://sourceforge.net/projects/phpmailer/" target="_blank">PHPMailer</a> class to send out the contact form emails.</p>
<p>For the page background we are using a fantastic <a href="http://www.flickr.com/photos/matthamm/2689470945/" target="_blank">dark wood texture</a> by Matt Hamm.</p>
<p>The form degrades gracefully, which means it is perfectly usable even with <strong>JavaScript turned off</strong>.</p>
<p><em><strong>*Edit:</strong> Also make sure you are running <strong>PHP 5</strong>. If this is not the case, you can switch the PHP version from your hosting control panel.</em></p>
<p>So lets start with the tutorial.</p>
<h3>Step 1 &#8211; XHTML</h3>
<p>First, we are going to take a look at the XHTML markup behind the form.</p>
<h4>demo.php</h4>
<pre class="brush:html">&lt;div id="main-container"&gt;	&lt;!-- The main container element --&gt;

&lt;div id="form-container"&gt;	&lt;!-- The form container --&gt;

&lt;h1&gt;Fancy Contact Form&lt;/h1&gt;	&lt;!-- Headings --&gt;
&lt;h2&gt;Drop us a line and we will get back to you&lt;/h2&gt;

&lt;form id="contact-form" name="contact-form" method="post" action="submit.php"&gt;	&lt;!-- The form, sent to submit.php --&gt;

&lt;table width="100%" border="0" cellspacing="0" cellpadding="5"&gt;

&lt;tr&gt;
&lt;td width="18%"&gt;&lt;label for="name"&gt;Name&lt;/label&gt;&lt;/td&gt;	&lt;!-- Text label for the input field --&gt;
&lt;td width="45%"&gt;&lt;input type="text" class="validate[required,custom[onlyLetter]]" name="name" id="name" value="&lt;?=$_SESSION['post']['name']?&gt;" /&gt;&lt;/td&gt;
&lt;!-- We are using session to prevent losing data between page redirects --&gt;

&lt;td width="37%" id="errOffset"&gt;&amp;nbsp;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&lt;label for="email"&gt;Email&lt;/label&gt;&lt;/td&gt;
&lt;td&gt;&lt;input type="text" class="validate[required,custom[email]]" name="email" id="email" value="&lt;?=$_SESSION['post']['email']?&gt;" /&gt;&lt;/td&gt;
&lt;td&gt;&amp;nbsp;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&lt;label for="subject"&gt;Subject&lt;/label&gt;&lt;/td&gt;

&lt;!-- This select is being replaced entirely by the jqtransorm plugin --&gt;

&lt;td&gt;&lt;select name="subject" id="subject"&gt;
&lt;option value="" selected="selected"&gt; - Choose -&lt;/option&gt;
&lt;option value="Question"&gt;Question&lt;/option&gt;
&lt;option value="Business proposal"&gt;Business proposal&lt;/option&gt;
&lt;option value="Advertisement"&gt;Advertising&lt;/option&gt;
&lt;option value="Complaint"&gt;Complaint&lt;/option&gt;
&lt;/select&gt;          &lt;/td&gt;
&lt;td&gt;&amp;nbsp;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td valign="top"&gt;&lt;label for="message"&gt;Message&lt;/label&gt;&lt;/td&gt;
&lt;td&gt;&lt;textarea name="message" id="message" class="validate[required]" cols="35" rows="5"&gt;&lt;?=$_SESSION['post']['message']?&gt;&lt;/textarea&gt;&lt;/td&gt;
&lt;td valign="top"&gt;&amp;nbsp;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&lt;label for="captcha"&gt;&lt;?=$_SESSION['n1']?&gt; + &lt;?=$_SESSION['n2']?&gt; =&lt;/label&gt;&lt;/td&gt;

&lt;!-- A simple captcha math problem --&gt;

&lt;td&gt;&lt;input type="text" class="validate[required,custom[onlyNumber]]" name="captcha" id="captcha" /&gt;&lt;/td&gt;
&lt;td valign="top"&gt;&amp;nbsp;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td valign="top"&gt;&amp;nbsp;&lt;/td&gt;
&lt;!-- These input buttons are being replaced with button elements --&gt;
&lt;td colspan="2"&gt;&lt;input type="submit" name="button" id="button" value="Submit" /&gt;
&lt;input type="reset" name="button2" id="button2" value="Reset" /&gt;
&lt;?=$str?&gt;

&lt;!-- $str contains the error string if the form is used with JS disabled --&gt;

&lt;img id="loading" src="img/ajax-load.gif" width="16" height="16" alt="loading" /&gt;
&lt;!-- the rotating gif animation, hidden by default --&gt;
&lt;/td&gt;&lt;/tr&gt;

&lt;/table&gt;
&lt;/form&gt;

&lt;?=$success?&gt;
&lt;!-- The $success variable contains the message that is shown if JS is disabled and the form is submitted successfully --&gt;

&lt;/div&gt;
&lt;/div&gt;	&lt;!-- closing the containers --&gt;</pre>
<p>As you can see from line 8, we are submitting our form to <strong>submit.php</strong>. We are using this file  to handle both the regular form submit (for visitors with JS disabled) and the AJAX form submit. This allows the code to be updated easily with no need to merge changes between files.</p>
<p>Later you can see that we use the <strong>$_SESSION</strong> array to populate the values of the input fields. This is done to insure that the data is not lost during page redirects, which occur when the form is submitted to <strong>submit.php</strong> during the regular form submit.</p>
<p>Another important aspect are the classes assigned to the input fields &#8211; <strong>classs=&#8221;validate[required,custom[onlyLetter]]&#8221;</strong>. These classes are used by the validation plug-in to define the validation rules for every input field, or text area. We are basically saying that the field is required, and only letters are allowed.</p>
<p>There is a number of available validation rules. You can see them at the plug-in&#8217;s <a href="http://www.position-absolute.com/articles/jquery-form-validator-because-form-validation-is-a-mess/" target="_blank">homepage</a>.</p>
<p>Now lets see how the plain form is fancyfied with the use of the <strong>JQtransform plugin</strong>.</p>
<div id="attachment_412" class="wp-caption alignnone" style="width: 610px"><img class="size-full wp-image-412" title="The fancy contact form" src="http://tutorialzine.com/wp-content/uploads/2009/09/i13.png" alt="The fancy contact form" width="600" height="460" /><p class="wp-caption-text">The fancy contact form</p></div>
<h3>Step 2 &#8211; jQuery</h3>
<p>We are using two jQuery plugins &#8211; <strong>JQtransform</strong> for styling all the form elements, and <strong>formValidator</strong>, which will help us validate all the input fields on the client side.</p>
<p>It is important to remember to always validate the input data on the server side in addition to client side validation.</p>
<p>First we need to include all the required libraries.</p>
<h4>demo.php</h4>
<pre class="brush:html">&lt;link rel="stylesheet" type="text/css" href="jqtransformplugin/jqtransform.css" /&gt;
&lt;link rel="stylesheet" type="text/css" href="formValidator/validationEngine.jquery.css" /&gt;
&lt;link rel="stylesheet" type="text/css" href="demo.css" /&gt;

&lt;?=$css?&gt; &lt;!-- Special CSS rules, created by PHP --&gt;

&lt;script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="jqtransformplugin/jquery.jqtransform.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="formValidator/jquery.validationEngine.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="script.js"&gt;&lt;/script&gt;</pre>
<p>The above code is from the head section of <strong>demo.php</strong>. We first include the stylesheets that are used by the two plugins, and then the jQuery library and the plugins. You might find line 5 interesting &#8211; this is a special set of CSS rules that we create with PHP to show a confirmation message, as you will see later.</p>
<p>Now lets take a look at our <strong>script.js</strong>.</p>
<h4>script.js</h4>
<pre class="brush:js">$(document).ready(function(){
	/* after the page has finished loading */

	$('#contact-form').jqTransform();
	/* transform the form using the jqtransform plugin */

	$("button").click(function(){

		$(".formError").hide();
		/* hide all the error tooltips */
	});

	var use_ajax=true;
	$.validationEngine.settings={};
	/* initialize the settings object for the formValidation plugin */

	$("#contact-form").validationEngine({	/* create the form validation */
		inlineValidation: false,
		promptPosition: "centerRight",
		success :  function(){use_ajax=true},	/* if everything is OK enable AJAX */
		failure : function(){use_ajax=false}	/* in case of validation failure disable AJAX */
	 })

	$("#contact-form").submit(function(e){

			if(!$('#subject').val().length)
			{
				$.validationEngine.buildPrompt(".jqTransformSelectWrapper","* This field is required","error")
				/* a custom validation tooltip, using the buildPrompt method */

				return false;
			}

			if(use_ajax)
			{
				$('#loading').css('visibility','visible');
				/* show the rotating gif */

				$.post('submit.php',$(this).serialize()+'&amp;ajax=1',
				/* using jQuery's post method to send data */

				function(data){
					if(parseInt(data)==-1)
						$.validationEngine.buildPrompt("#captcha","* Wrong verification number!","error");
						/* if there is an error, build a custom error tooltip for the captcha */
					else
					{
						$("#contact-form").hide('slow').after('&lt;h1&gt;Thank you!&lt;/h1&gt;');
						/* show the confirmation message */
					}

					$('#loading').css('visibility','hidden');
					/* hide the rotating gif */
				});
			}

e.preventDefault();	/* stop the default form submit */
})

});</pre>
<p>This entire script block is executed within the <strong>$(document).ready</strong> method, which guarantees that it is run after the page has finished loading.</p>
<p>Next we use the <strong>jqTransform()</strong> method that is defined by the <strong>jqtransform plugin</strong>. It converts and styles all of the form&#8217;s elements (input fields, text areas, buttons).</p>
<p>The select element is actually replaced by a set of divs and anchors. It surely looks great, but opens up some problems with the validation plugin which make us handle our own tooltip for the select drop-down.</p>
<p>After this on line 7 we bind every click on the buttons at the bottom of the page with a line of code that hides all currently displayed error tooltips by the validation plugin. This insures they are properly refreshed and do not stay on screen if the user enters valid data.</p>
<p>Later we initialize the <strong>formValidation</strong> plugin with the <strong>validationEngine()</strong> method and on line 24 define the form&#8217;s <strong>onsubmit</strong> event. A few things worth mentioning here &#8211; the custom tooltip on line 28, and the additional <strong>ajax=1</strong> parameter on line 39. This parameter is used by <strong>submit.php</strong> to distinguish whether the request has been made through ajax or directly with the form submit.</p>
<p>Also notice that we use a special variable <strong>use_ajax</strong>, to prevent ajax interactions if the form fails to validate.</p>
<div id="attachment_413" class="wp-caption alignnone" style="width: 610px"><img class="size-full wp-image-413  " title="How the form is submitted" src="http://tutorialzine.com/wp-content/uploads/2009/09/chart11.png" alt="The form is submitted" width="600" height="460" /><p class="wp-caption-text">How the form is submitted</p></div>
<h3>Step 3 &#8211; CSS</h3>
<p>All of our CSS rules are defined in demo.css</p>
<h4>demo.css</h4>
<pre class="brush:css">body,h1,h2,h3,p,quote,small,form,input,ul,li,ol,label{
	/* reset some of the page elements */
	margin:0px;
	padding:0px;
}

body{
	color:#555555;
	font-size:13px;
	background: url(img/dark_wood_texture.jpg) #282828;
	font-family:Arial, Helvetica, sans-serif;
}

.clear{
	clear:both;
}

#main-container{
	width:400px;
	margin:30px auto;
}

#form-container{
	background-color:#f5f5f5;
	padding:15px;

	/* rounded corners */
	-moz-border-radius:12px;
	-khtml-border-radius: 12px;
	-webkit-border-radius: 12px;
	border-radius:12px;
}

td{
	/* prevent multiline text */
	white-space:nowrap;
}

a, a:visited {
	color:#00BBFF;
	text-decoration:none;
	outline:none;
}

a:hover{
	text-decoration:underline;
}

h1{
	color:#777777;
	font-size:22px;
	font-weight:normal;
	text-transform:uppercase;
	margin-bottom:5px;
}

h2{
	font-weight:normal;
	font-size:10px;

	text-transform:uppercase;

	color:#aaaaaa;
	margin-bottom:15px;

	border-bottom:1px solid #eeeeee;
	margin-bottom:15px;
	padding-bottom:10px;
}

label{
	text-transform:uppercase;
	font-size:10px;
	font-family:Tahoma,Arial,Sans-serif;
}

textarea{
	color:#404040;
	font-family:Arial,Helvetica,sans-serif;
	font-size:12px;
}

td &gt; button{
	/* A special CSS selector that targets non-IE6 browsers */
	text-indent:8px;
}

.error{
	/* this class is used if JS is disabled */
	background-color:#AB0000;
	color:white;
	font-size:10px;
	font-weight:bold;
	margin-top:10px;
	padding:10px;
	text-transform:uppercase;
	width:300px;
}

#loading{
	/* the loading gif is hidden on page load */
	position:relative;
	bottom:9px;
	visibility:hidden;
}

.tutorial-info{
	color:white;
	text-align:center;
	padding:10px;
	margin-top:10px;
}</pre>
<p>Nothing out of this world here. Notice line 85. This makes the buttons at the bottom of the form wider, but unfortunately they look buggy in IE6. That is why I used a special CSS selector that is ignored in IE6, to target the rest of the browsers.</p>
<p>Now all that is left is the PHP code.</p>
<div id="attachment_415" class="wp-caption alignnone" style="width: 610px"><img class="size-full wp-image-415" title="The form validation plugin" src="http://tutorialzine.com/wp-content/uploads/2009/09/i21.png" alt="The form validation plugin" width="600" height="230" /><p class="wp-caption-text">The form validation plugin</p></div>
<h3>Step 4 &#8211; PHP</h3>
<p>First lets take a look at the code in the beginning of demo.php.</p>
<h4>demo.php</h4>
<pre class="brush:php">session_name("fancyform");
session_start();

$_SESSION['n1'] = rand(1,20);	/* generate the first number */
$_SESSION['n2'] = rand(1,20);	/* then the second */
$_SESSION['expect'] = $_SESSION['n1']+$_SESSION['n2'];	/* the expected result */

/* the code below is used if JS has been disabled by the user */
$str='';
if($_SESSION['errStr'])	/* if submit.php returns an error string in the session array */
{
	$str='&lt;div class="error"&gt;'.$_SESSION['errStr'].'&lt;/div&gt;';
	unset($_SESSION['errStr']);	/* will be shown only once */
}

$success='';
if($_SESSION['sent'])
{
	$success='&lt;h1&gt;Thank you!&lt;/h1&gt;';	/* the success message */

	$css='&lt;style type="text/css"&gt;#contact-form{display:none;}&lt;/style&gt;';
	/* a special CSS rule that hides our form */

	unset($_SESSION['sent']);
}</pre>
<p>As you can see, we use the <strong>$_SESSION</strong> array to store the two random numbers and the expected result. This is later used in <strong>submit.php</strong> to confirm the captcha has been solved.</p>
<p>Another interesting moment is line 21 where we define a custom CSS class. This hides the form, so that the only thing shown is the success message in case the visitor has disabled JS.</p>
<h4>submit.php</h4>
<pre class="brush:php">require "phpmailer/class.phpmailer.php";

session_name("fancyform");	/* starting the session */
session_start();

foreach($_POST as $k=&gt;$v)
{
	/* if magic_quotes is enabled, strip the post array */
	if(ini_get('magic_quotes_gpc'))
	$_POST[$k]=stripslashes($_POST[$k]);

	$_POST[$k]=htmlspecialchars(strip_tags($_POST[$k]));
	/* escape the special chars */
}

$err = array();

/* some error checks */
if(!checkLen('name'))
	$err[]='The name field is too short or empty!';

if(!checkLen('email'))
	$err[]='The email field is too short or empty!';
else if(!checkEmail($_POST['email']))
	$err[]='Your email is not valid!';

if(!checkLen('subject'))
	$err[]='You have not selected a subject!';

if(!checkLen('message'))
	$err[]='The message field is too short or empty!';

/* compare the received captcha code to the one in the session array */
if((int)$_POST['captcha'] != $_SESSION['expect'])
	$err[]='The captcha code is wrong!';

/* if there are errors */
if(count($err))
{
	/* if the form was submitted via AJAX */
	if($_POST['ajax'])
	{
		echo '-1';
	}

	/* else fill the SESSION array and redirect back to the form */
	else if($_SERVER['HTTP_REFERER'])
	{
		$_SESSION['errStr'] = implode('&lt;br /&gt;',$err);
		$_SESSION['post']=$_POST;

		header('Location: '.$_SERVER['HTTP_REFERER']);
	}

	exit;
}

/* the email body */
$msg=
'Name:	'.$_POST['name'].'&lt;br /&gt;
Email:	'.$_POST['email'].'&lt;br /&gt;
IP:	'.$_SERVER['REMOTE_ADDR'].'&lt;br /&gt;&lt;br /&gt;

Message:&lt;br /&gt;&lt;br /&gt;

'.nl2br($_POST['message']).'

';

$mail = new PHPMailer();	/* using PHPMailer */
$mail-&gt;IsMail();

$mail-&gt;AddReplyTo($_POST['email'], $_POST['name']);
$mail-&gt;AddAddress($emailAddress);
$mail-&gt;SetFrom($_POST['email'], $_POST['name']);
$mail-&gt;Subject = "A new ".mb_strtolower($_POST['subject'])." from ".$_POST['name']." | contact form feedback";

$mail-&gt;MsgHTML($msg);

$mail-&gt;Send();

unset($_SESSION['post']);	/* unsetting */

/* the form was successfully sent */
if($_POST['ajax'])
{
	echo '1';
}
else
{
	$_SESSION['sent']=1;

	if($_SERVER['HTTP_REFERER'])
		header('Location: '.$_SERVER['HTTP_REFERER']);

	exit;
}

/* some helpful functions */
function checkLen($str,$len=2)
{
	return isset($_POST[$str]) &amp;&amp; mb_strlen(strip_tags($_POST[$str]),"utf-8") &gt; $len;
}

function checkEmail($str)
{
	return preg_match("/^[\.A-z0-9_\-\+]+[@][A-z0-9_\-]+([.][A-z0-9_\-]+)+[A-z]{1,4}$/", $str);
}</pre>
<p>Note how we check whether the <strong>$_POST['ajax']</strong> variable has been set and act accordingly. As you remember, we set it back in <strong>script.js</strong> to indicate we were using AJAX to fetch the data.</p>
<p>The two <strong>$_SESSION</strong> variables <strong>errStr</strong> and <strong>post</strong> are used to share data between the form and <strong>submit.php</strong> in case JS is disabled. Here <strong>post</strong> contains the <strong>$_POST</strong> array we sent and is used to populate the fields of the form, once the user is redirected back.</p>
<p>With this our fancy contact form is finished!</p>
<h3>Conclusion</h3>
<p>Today we used two great jQuery plugins in conjunction to create a fancy looking contact form. The best thing is that it works in any browser and thanks to graceful degradation you don&#8217;t even need to have javascript enabled.</p>
<p>You are free to download and modify the code. The only thing needed to run this demo on your own is to put in the email address you want to receive the emails to in submit.php.</p>
<p><em><strong>*Edit:</strong> If you modify the code, try opening <strong>submit.php</strong> directly in your browser &#8211; this will show any possible errors that would remain hidden otherwise. If you run into trouble you can take a look at the comment section &#8211; there might be the answer to your problem.<br />
</em></p>
<div><table border=0 bgcolor=#ffffff> <td><iframe src='http://digg.com/api/diggthis.php?w=new&amp;u=http%3A%2F%2Ftutorialzine.com%2F2009%2F09%2Ffancy-contact-form%2F&amp;t=A+Fancy+AJAX+Contact+Form&amp;s=normal' height='80' width='52' frameborder='0' scrolling='no'></iframe></td> <td><iframe src='http://www.reddit.com/button_content?newwindow=1&amp;url=http%3A%2F%2Ftutorialzine.com%2F2009%2F09%2Ffancy-contact-form%2F&amp;title=A+Fancy+AJAX+Contact+Form&amp;t=2 ' height='80' width='52' scrolling='no' frameborder='0' ></iframe></td> <td><iframe src='http://widgets.dzone.com/links/widgets/zoneit.html?url=http%3A%2F%2Ftutorialzine.com%2F2009%2F09%2Ffancy-contact-form%2F&amp;title=A+Fancy+AJAX+Contact+Form&amp;t=1 ' height='80' width='52' scrolling='no' frameborder='0' ></iframe></td> <td><iframe src='http://api.tweetmeme.com/button.js?url=http%3A%2F%2Ftutorialzine.com%2F2009%2F09%2Ffancy-contact-form%2F&amp;source=Tutorialzine&amp;style=normal ' height='61' width='50' frameborder='0' scrolling='no'></iframe></td> <td><script type="text/javascript"> var fbShare = {url: 'http://tutorialzine.com/2009/09/fancy-contact-form/',size:'large'}</script><script type="text/javascript" src="http://widgets.fbshare.me/files/fbshare.js"></script></td></table></div><!-- Generated by Digg Digg plugin, 
    Author : Yong Mook Kim
    Website : http://www.mkyong.com/blog/digg-digg-wordpress-plugin/
	--><img src="http://feeds.feedburner.com/~r/Tutorialzine/~4/i0cnqsuQJMc" height="1" width="1"/>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:36:"http://wellformedweb.org/CommentAPI/";a:1:{s:10:"commentRss";a:1:{i:0;a:5:{s:4:"data";s:56:"http://tutorialzine.com/2009/09/fancy-contact-form/feed/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:38:"http://purl.org/rss/1.0/modules/slash/";a:1:{s:8:"comments";a:1:{i:0;a:5:{s:4:"data";s:3:"103";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:42:"http://rssnamespace.org/feedburner/ext/1.0";a:1:{s:8:"origLink";a:1:{i:0;a:5:{s:4:"data";s:51:"http://tutorialzine.com/2009/09/fancy-contact-form/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}}}i:7;a:6:{s:4:"data";s:50:"
		
		
		
		
		
				
		
		
		

		
		
			
			
		
		";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";s:5:"child";a:6:{s:0:"";a:7:{s:5:"title";a:1:{i:0;a:5:{s:4:"data";s:50:"An AJAX Based Shopping Cart with PHP, CSS & jQuery";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"link";a:1:{i:0;a:5:{s:4:"data";s:59:"http://feedproxy.google.com/~r/Tutorialzine/~3/E8bghO7Ys_o/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"comments";a:1:{i:0;a:5:{s:4:"data";s:66:"http://tutorialzine.com/2009/09/shopping-cart-php-jquery/#comments";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:7:"pubDate";a:1:{i:0;a:5:{s:4:"data";s:31:"Sat, 19 Sep 2009 20:38:14 +0000";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"category";a:4:{i:0;a:5:{s:4:"data";s:3:"CSS";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:1;a:5:{s:4:"data";s:5:"MySQL";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:2;a:5:{s:4:"data";s:3:"PHP";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:3;a:5:{s:4:"data";s:6:"jQuery";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"guid";a:1:{i:0;a:5:{s:4:"data";s:30:"http://tutorialzine.com/?p=394";s:7:"attribs";a:1:{s:0:"";a:1:{s:11:"isPermaLink";s:5:"false";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:11:"description";a:1:{i:0;a:5:{s:4:"data";s:194:"In this tutorial we are going to create an AJAX-driven shopping cart. All the products are going to be stored in a MySQL database, with PHP processing the data and jQuery handling the front end.";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:32:"http://purl.org/dc/elements/1.1/";a:1:{s:7:"creator";a:1:{i:0;a:5:{s:4:"data";s:6:"Martin";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:40:"http://purl.org/rss/1.0/modules/content/";a:1:{s:7:"encoded";a:1:{i:0;a:5:{s:4:"data";s:24363:"<h3>Introduction</h3>
<p>In this tutorial we are going to create an AJAX-driven shopping cart. All the products are going to be stored in a MySQL database, with PHP showing and processing the data.</p>
<p>jQuery will drive the AJAX-es on the page, and with the help of the <a href="http://craigsworks.com/projects/simpletip/" target="_blank">simpletip plugin</a> will add to an interactive check out process.</p>
<p>So go ahead, download the <strong>demo files</strong> and start reading.</p>
<h3>Step 1 &#8211; the MySQL Database</h3>
<p>If you want to set up a working demo, you&#8217;ll need to execute the following SQL code in your <strong>database manager</strong> (e.g. phpMyAdmin).  It will set up the table and insert a few products. The code is also available in <strong>table.sql</strong> in the demo files.</p>
<h4>table.sql</h4>
<pre class="brush:sql">CREATE TABLE IF NOT EXISTS `internet_shop` (
  `id` int(6) NOT NULL auto_increment,
  `img` varchar(32) collate utf8_unicode_ci NOT NULL default '',
  `name` varchar(64) collate utf8_unicode_ci NOT NULL default '',
  `description` text collate utf8_unicode_ci NOT NULL,
  `price` double NOT NULL default '0',
  PRIMARY KEY  (`id`),
  UNIQUE KEY `img` (`img`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=7 ;

INSERT INTO `internet_shop` VALUES(1, 'iPod.png', 'iPod', 'The original and popular iPod.', 200);
INSERT INTO `internet_shop` VALUES(2, 'iMac.png', 'iMac', 'The iMac computer.', 1200);
INSERT INTO `internet_shop` VALUES(3, 'iPhone.png', 'iPhone', 'This is the new iPhone.', 400);
INSERT INTO `internet_shop` VALUES(4, 'iPod-Shuffle.png', 'iPod Shuffle', 'The new iPod shuffle.', 49);
INSERT INTO `internet_shop` VALUES(5, 'iPod-Nano.png', 'iPod Nano', 'The new iPod Nano.', 99);
INSERT INTO `internet_shop` VALUES(6, 'Apple-TV.png', 'Apple TV', 'The new Apple TV. Buy it now!', 300);</pre>
<p>After this, you should fill in your MySQL credentials in <strong>connect.inc.php</strong>.</p>
<h3>Step 2 &#8211; the XHTML</h3>
<p>First we start off with our main markup.</p>
<h4>demo.php</h4>
<pre class="brush:html">&lt;div id="main-container"&gt; &lt;!-- the main container element --&gt;

&lt;div class="tutorialzine"&gt;	&lt;!-- some headings --&gt;
&lt;h1&gt;Shopping cart&lt;/h1&gt;
&lt;h3&gt;The best products at the best prices&lt;/h3&gt;
&lt;/div&gt;

&lt;div class="container"&gt;	&lt;!-- the first section - products --&gt;

&lt;span class="top-label"&gt;
&lt;span class="label-txt"&gt;Products&lt;/span&gt;	&lt;!-- section label --&gt;
&lt;/span&gt;

&lt;div class="content-area"&gt;
&lt;div class="content drag-desired"&gt;	&lt;!-- assigning a common content class and an individually targeted drag-desired class --&gt;

&lt;?php
// php code that generates the products
?&gt;

&lt;div class="clear"&gt;&lt;/div&gt;	&lt;!-- clearing the floats --&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="bottom-container-border"&gt;	&lt;!-- bottom part of the section --&gt;
&lt;/div&gt;

&lt;/div&gt;	&lt;!-- closing the products section --&gt;

&lt;div class="container"&gt;	&lt;!-- the second section - shopping cart --&gt;

&lt;span class="top-label"&gt;
&lt;span class="label-txt"&gt;Shopping Cart&lt;/span&gt;	&lt;!-- label for the section --&gt;
&lt;/span&gt;

&lt;div class="content-area"&gt;
&lt;div class="content drop-here"&gt;	&lt;!-- content class, shared with the product section above, and the targeted drop-here class --&gt;
&lt;div id="cart-icon"&gt;
&lt;img src="img/Shoppingcart_128x128.png" alt="shopping cart" class="pngfix" width="128" height="128" /&gt;	&lt;!-- using the pngfix class --&gt;
&lt;img src="img/ajax_load_2.gif" alt="loading.." id="ajax-loader" width="16" height="16" /&gt;	&lt;!-- the rotating gif - hidden by default and shown during ajax interactions --&gt;
&lt;/div&gt;

&lt;form name="checkoutForm" method="post" action="order.php"&gt;	&lt;!-- the form --&gt;
&lt;div id="item-list"&gt;	&lt;!-- in this div we insert all the products in the shopping cart --&gt;

&lt;/div&gt;
&lt;/form&gt;	&lt;!-- closing the form --&gt;

&lt;div class="clear"&gt;&lt;/div&gt;	&lt;!-- clearing --&gt;

&lt;div id="total"&gt;&lt;/div&gt;	&lt;!-- the total price goes here --&gt;
&lt;div class="clear"&gt;&lt;/div&gt;	&lt;!-- clearing the floats --&gt;

&lt;a href="" onclick="document.forms.checkoutForm.submit(); return false;" class="button"&gt;Checkout&lt;/a&gt;	&lt;!-- the submit button, hidden by default, notice the onclick attribute --&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;div class="bottom-container-border"&gt;	&lt;!-- bottom part of the section --&gt;
&lt;/div&gt;

&lt;/div&gt;&lt;!-- closing the main container --&gt;</pre>
<p>As you can see, we&#8217;ve organized our content into two main sections, which are almost identical in the XHTML markup they use &#8211; the first one, where all the products are displayed, and second one, acting as a shopping card.</p>
<p>Below you can see a detailed explanation of the structure of the product section.</p>
<div id="attachment_396" class="wp-caption alignnone" style="width: 610px"><img class="size-full wp-image-396" title="The product section" src="http://tutorialzine.com/wp-content/uploads/2009/09/i12.png" alt="The product section" width="600" height="460" /><p class="wp-caption-text">The product section</p></div>
<p>The products are generated by our PHP code, as you can see on line 18. We are digging deeper into this in a few minutes. Now lets take a look at how we turned the XHTML layout into a finished design.</p>
<h3>Step 3 &#8211; the CSS</h3>
<p>This time the CSS code is quite long, so I&#8217;m going to split it into parts.</p>
<h4>demo.css</h4>
<pre class="brush:css">body,h1,h2,h3,p,td,quote,small,form,input,ul,li,ol,label{
/* resetting some of the styles for browser compatibility */
	margin:0px;
	padding:0px;
	font-family:Arial, Helvetica, sans-serif;
}

body{
	color:#555555;
	font-size:13px;
	background-color:#282828;
}

.clear{	/* implementing the clear-fix hack for fixing floated layouts */
	clear:both;
}

#main-container{	/* this is the main container, holding the two sections */
	width:700px;
	margin:20px auto;
}

.container{	/* the main container of our content sections - the products and the shopping cart */
	margin-bottom:40px;
}

.top-label{	/* the outer span comprising the label */
	background:url(img/label_bg.png) no-repeat;	/* showing the left part of label_bg.png - a wide round-cornered image */
	display:inline-block;
	margin-left:20px;
	position:relative;
	margin-bottom:-15px;	/* the whole label is lowered on the product section */
}

.label-txt{	/* the inner span - red border in the illustration above */
	background:url(img/label_bg.png) no-repeat top right;	/* shows the right part of the wider label_bg.png */
	display:inline-block;
	font-size:10px;
	height:36px;
	margin-left:10px;	/* leaves space on the left, so that the outer span can show its background */
	padding:12px 15px 0 5px;
	text-transform:uppercase;
}

.content-area{	/* The top part of the rounded container image, see the illustration above */
	background:url(img/container_top.png) no-repeat #fcfcfc;
	padding:15px 20px 0 20px;
}

.content{	/* shared by the two sections */
	padding:10px;
}

.drag-desired{	/* individually targeted properties */
	background:url(img/drag_desired_label.png) no-repeat top right;
	padding:30px;
}

.drop-here{	/* not shared with the other sections */
	background:url(img/drop_here_label.png) no-repeat top right;
}

.bottom-container-border{	/* the bottom rounded graphic, that completes the section */
	background:url(img/container_bottom.png) no-repeat;
	height:14px;
}

.product{	/* styling the products */
	border:2px solid #F5F5F5;
	float:left;
	margin:15px;
	padding:10px;
}

.product img{
	cursor:move;
}

p.descr{
	padding:5px 0;
}

small{
	display:block;
	margin-top:4px;
}

.tooltip{	/* the tooltips, this div is created by the simpletip plugin */
	position: absolute;
	top: 0;
	left: 0;
	z-index: 3;
	display: none;

	background-color:#666666;
	border:1px solid #666666;
	color:#fcfcfc;

	padding:10px;

	-moz-border-radius:12px;	/* rounded corners */
	-khtml-border-radius: 12px;
	-webkit-border-radius: 12px;
	border-radius:12px;
}</pre>
<p>Notice the tooltip class. It is created automatically by the <strong>simpletip plugin</strong>, but it has no styles applied by default. That is why we style it here. I&#8217;ve used the <strong>border-radius</strong> property, which is not yet supported by all browsers, but will degrade gracefully for those that don&#8217;t.</p>
<p>Now lets take a look at the styles that target the shopping cart section.</p>
<pre class="brush:css">#cart-icon{	/* the div that contains the shopping cart icon */
	width:128px;
	float:left;
	position:relative;	/* changing the position to relative so that ajax-loader is positioned relative to it */
}

#ajax-loader{
	position:absolute;	/* absolute positioning makes an element relative to its parent if the latter has positioning different from the default  */
	top:0px;
	left:0px;
	visibility:hidden;
}

#item-list{	/* the contents of the shopping cart goes into this div */
	float:left;
	width:490px;
	margin-left:20px;
	padding-top:15px;
}

a.remove,a.remove:visited{	/* the REMOVE link */
	color:red;
	font-size:10px;
	text-transform:uppercase;
}

#total{	/* the total cost div */
	clear:both;
	float:right;
	font-size:10px;
	font-weight:bold;
	padding:10px 12px;
	text-transform:uppercase;
}

#item-list table{	/* every product in the shopping cart is positioned inside the item-list div */
	background-color:#F7F7F7;
	border:1px solid #EFEFEF;
	margin-top:5px;
	padding:4px;
}

a.button,a.button:visited{	/* the CHECKOUT button */
	display:none;

	height:29px;
	width:136px;

	padding-top:15px;
	margin:0 auto;
	overflow:hidden;

	color:white;
	font-size:12px;
	font-weight:bold;
	text-align:center;
	text-transform:uppercase;

	background:url(img/button.png) no-repeat center top;	/* showing only the top part of the background image */
}

a.button:hover{
	background-position:bottom;	/* on hover we show the bottom part of the image */
	text-decoration:none;
}

/* Some less interesting classes */

a, a:visited {
	color:#00BBFF;
	text-decoration:none;
	outline:none;
}

a:hover{
	text-decoration:underline;
}

h1{
	font-size:28px;
	font-weight:bold;
	font-family:"Trebuchet MS",Arial, Helvetica, sans-serif;
}

h2{
	font-weight:normal;
	font-size:20px;

	color:#666666;
	text-indent:30px;
	margin:20px 0;
}

.tutorialzine h1{
	color:white;
	margin-bottom:10px;
	font-size:48px;
}

.tutorialzine h3{
	color:#F5F5F5;
	font-size:10px;
	font-weight:bold;
	margin-bottom:30px;
	text-transform:uppercase;
}

.tutorial-info{
	color:white;
	text-align:center;
	padding:10px;
	margin-top:-20px;
}</pre>
<p>As any front-end developer will tell you, we have something missing here. You guessed it &#8211; special treatment for <strong>IE6</strong>.</p>
<p>I personally plan to stop supporting IE6 soon in my projects altogether &#8211; if it wasn&#8217;t for it, the above code would have been at least a quarter shorter, and it would have taken a lot less time to debug.</p>
<p>But anyway, here is how we target IE6 specifically:</p>
<h4>demo.php</h4>
<pre class="brush:html">&lt;!--[if lt IE 7]&gt;
&lt;style type="text/css"&gt;
	.pngfix { behavior: url(pngfix/iepngfix.htc);}	/* this is a special htc file that fixes the IE6 transparency issues */
	.tooltip{width:200px;};	/* provide a default width for the tooltips */
&lt;/style&gt;
&lt;![endif]--&gt;</pre>
<p>There. Now lets take a look at the PHP backend.</p>
<div id="attachment_398" class="wp-caption alignnone" style="width: 610px"><img class="size-full wp-image-398 " title="The shopping cart" src="http://tutorialzine.com/wp-content/uploads/2009/09/i2.png" alt="The sopping cart" width="600" height="230" /><p class="wp-caption-text">The shopping cart</p></div>
<h3>Step 4 &#8211; PHP</h3>
<p>We use PHP in a number of ways and places. First lets look at how the product list is generated on the main page.</p>
<h4>demo.php</h4>
<pre class="brush:php">$result = mysql_query("SELECT * FROM internet_shop");	// selecting all the products
while($row=mysql_fetch_assoc($result))
{
	echo '&lt;div class="product"&gt;&lt;img src="img/products/'.$row['img'].'" alt="'.htmlspecialchars($row['name']).'" width="128" height="128" class="pngfix" /&gt;&lt;/div&gt;';
}</pre>
<p>Another place where we use PHP is in <strong>tips.php</strong>, which takes an <strong>image file name</strong> as a parameter, checks which product is associated with that image, and outputs the tool tip data as html. This is later used by the <strong>simpletip</strong> plugin.</p>
<h4>ajax/tips.php</h4>
<pre class="brush:php">define('INCLUDE_CHECK',1);
require "../connect.php";

if(!$_POST['img']) die("There is no such product!");

$img=mysql_real_escape_string(end(explode('/',$_POST['img'])));

$row=mysql_fetch_assoc(mysql_query("SELECT * FROM internet_shop WHERE img='".$img."'"));

if(!$row) die("There is no such product!");

echo '&lt;strong&gt;'.$row['name'].'&lt;/strong&gt;
&lt;p class="descr"&gt;'.$row['description'].'&lt;/p&gt;
&lt;strong&gt;price: $'.$row['price'].'&lt;/strong&gt;
&lt;small&gt;Drag it to your shopping cart to purchase it&lt;/small&gt;';</pre>
<p>We also use PHP to return the necessary data for the addition of products in the shopping cart. The difference is that this time we return the data as JSON (a javascript object).</p>
<h4>ajax/addtocart.php</h4>
<pre class="brush:php">define('INCLUDE_CHECK',1);
require "../connect.php";

if(!$_POST['img']) die("There is no such product!");

$img=mysql_real_escape_string(end(explode('/',$_POST['img'])));
$row=mysql_fetch_assoc(mysql_query("SELECT * FROM internet_shop WHERE img='".$img."'"));

echo '{status:1,id:'.$row['id'].',price:'.$row['price'].',txt:\'\
\
&lt;table width="100%" id="table_'.$row['id'].'"&gt;\
&lt;tr&gt;\
&lt;td width="60%"&gt;'.$row['name'].'&lt;/td&gt;\
&lt;td width="10%"&gt;$'.$row['price'].'&lt;/td&gt;\
&lt;td width="15%"&gt;&lt;select name="'.$row['id'].'_cnt" id="'.$row['id'].'_cnt" onchange="change('.$row['id'].');"&gt;\
&lt;option value="1"&gt;1&lt;/option&gt;\
&lt;option value="2"&gt;2&lt;/option&gt;\
&lt;option value="3"&gt;3&lt;/option&gt;&lt;/slect&gt;\
\
&lt;/td&gt;\
&lt;td width="15%"&gt;&lt;a href="#" onclick="remove('.$row['id'].');return false;" class="remove"&gt;remove&lt;/a&gt;&lt;/td&gt;\
&lt;/tr&gt;\
&lt;/table&gt;\'}';</pre>
<p>The outputted object has <strong>status</strong>, <strong>id</strong>, <strong>price</strong> and <strong>txt</strong> properties. These are used by our AJAX functions as you&#8217;ll see in a moment.</p>
<p>Notice how I&#8217;ve escaped each line of the string with a backslash. This is done because javascript does not support multiline strings.</p>
<p>The last place where we use PHP is in <strong>order.php</strong>, which is used to process the orders. Currently, it just outputs your order. You could modify it to include an email form, paypal functionality, or anything that will make it into a functional online shop.</p>
<h4>order.php</h4>
<pre class="brush:php">&lt;?php

define('INCLUDE_CHECK',1);
require "connect.php";

if(!$_POST)	// if there is no data submitted to the form
{
	if($_SERVER['HTTP_REFERER'])	// redirect
	header('Location : '.$_SERVER['HTTP_REFERER']);
	exit;	// and exit
}

?&gt;

&lt;!-- XHTML code.. --&gt;

&lt;?php

$cnt = array();
$products = array();

foreach($_POST as $key=&gt;$value)
{
	$key=(int)str_replace('_cnt','',$key);
	$products[]=$key;	// store the product ids in an array
	$cnt[$key]=$value;	// create a key / value pair where for each product id there is a corresponding value being the number of products
 purchased}

$result = mysql_query("SELECT * FROM internet_shop WHERE id IN(".join($products,',').")");	// selecting all the products with the IN() function

if(!mysql_num_rows($result))	// no products found
{
	echo '&lt;h1&gt;There was an error with your order!&lt;/h1&gt;';
}
else
{
	echo '&lt;h1&gt;You ordered:&lt;/h1&gt;';
	while($row=mysql_fetch_assoc($result))
	{
		echo '&lt;h2&gt;'.$cnt[$row['id']].' x '.$row['name'].'&lt;/h2&gt;';
		$total+=$cnt[$row['id']]*$row['price'];
	}

	echo '&lt;h1&gt;Total: $'.$total.'&lt;/h1&gt;';
}

?&gt;</pre>
<p>This concludes the PHP section. The only thing that is left is some jQuery magic.</p>
<div id="attachment_399" class="wp-caption alignnone" style="width: 610px"><img class="size-full wp-image-399" title="A simple order page" src="http://tutorialzine.com/wp-content/uploads/2009/09/i3.png" alt="A simple order page" width="600" height="230" /><p class="wp-caption-text">A simple order page</p></div>
<h3>Step 5 &#8211; jQuery</h3>
<p>We will utilize jQuery to the fullest, so we will need to include the additional jQuery UI library as well as the basic library.</p>
<pre class="brush:html">&lt;script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/jquery-ui.min.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="simpletip/jquery.simpletip-1.3.1.pack.js"&gt;&lt;/script&gt; &lt;!-- the jQuery simpletip plugin --&gt;
&lt;script type="text/javascript" src="script.js"&gt;&lt;/script&gt; &lt;!-- our script.js file --&gt;</pre>
<p>Now we can continue with our script.</p>
<h4>script.js</h4>
<pre class="brush:js">var purchased=new Array();	//an array containing all the products we've purchased so far
var totalprice=0;	//the total price

$(document).ready(function(){

	$('.product').simpletip({	//using the simpletip plugin

		offset:[40,0],
		content:'&lt;img style="margin:10px;" src="img/ajax_load.gif" alt="loading" /&gt;',	// default content
		onShow: function(){

			var param = this.getParent().find('img').attr('src');
			// fix for IE6
			if($.browser.msie &amp;&amp; $.browser.version=='6.0')
			{
				param = this.getParent().find('img').attr('style').match(/src=\"([^\"]+)\"/);
				param = param[1];
			}

			// after the tooltip is shown, load the tips.php file and pass the image name as a parameter
			this.load('ajax/tips.php',{img:param});
		} 

	});

	$(".product img").draggable({	// enable all product images to be dragged

	containment: 'document',
	opacity: 0.6,
	revert: 'invalid',
	helper: 'clone',
	zIndex: 100

	});

	$("div.content.drop-here").droppable({	// convert the shopping cart to a droppable

			drop:
				function(e, ui)
				{
					var param = $(ui.draggable).attr('src');
					// IE6 fix
					if($.browser.msie &amp;&amp; $.browser.version=='6.0')
					{
						param = $(ui.draggable).attr('style').match(/src=\"([^\"]+)\"/);
						param = param[1];
					}

					addlist(param);	// the special addlist function - see below
				}

	});

});</pre>
<p>The main idea here is that we use an image&#8217;s <strong>src</strong> attribute as an unique key that is sent to the PHP back-end. Every product in the DB has a file name filed, which enables us to find the product by it&#8217;s product image.</p>
<p>This whole block of code is executed after the page has finished loading, so we are sure that all the elements on the page are initialized.</p>
<p>Below is the second part of <strong>script.js</strong>.</p>
<pre class="brush:js">function addlist(param)
{
	// the addlist function ads a product to the shopping cart

	$.ajax({	// sending an ajax request to addtocart.php
	type: "POST",
	url: "ajax/addtocart.php",
	data: 'img='+encodeURIComponent(param),	// the product image as a parameter
	dataType: 'json',	// expecting json
	beforeSend: function(x){$('#ajax-loader').css('visibility','visible');},	// showing the loading gif
	success: function(msg){

		$('#ajax-loader').css('visibility','hidden');	// hiding the loading gif animation
		if(parseInt(msg.status)!=1)
		{
			return false;	// if there has been an error, return false
		}
		else
		{
			var check=false;
			var cnt = false;

			for(var i=0; i&lt;purchased.length;i++)
			{
				if(purchased[i].id==msg.id)	// find if we have already bought this prduct
				{
					check=true;
					cnt=purchased[i].cnt;

					break;
				}
			}

			if(!cnt)	// if we haven't bought it yet, or we have removed it from the purchases, we insert it in the shopping cart
				$('#item-list').append(msg.txt);

			if(!check)	// if we haven't bought it yet, insert it in the purchased array
			{
				purchased.push({id:msg.id,cnt:1,price:msg.price});
			}

			else	// else if we've bought it
			{
				if(cnt&gt;=3) return false;	// 3 products of type max

				purchased[i].cnt++;
				$('#'+msg.id+'_cnt').val(purchased[i].cnt);	// update the select box
			}

			totalprice+=msg.price;	// recalculate the price
			update_total();	// update the total div

		}

		$('.tooltip').hide();	// hiding the tooltip (sometimes it stays on screen after the drag)

	}
	});
}

function findpos(id)	// a helper function that finds the position at which the product is inserted in the array, returns the position
{
	for(var i=0; i&lt;purchased.length;i++)
	{
		if(purchased[i].id==id)
			return i;
	}

	return false;
}

function remove(id)	// remove a product from the shopping cart
{
	var i=findpos(id);	// find its position in the array

	totalprice-=purchased[i].price*purchased[i].cnt;	// recalculate the price
	purchased[i].cnt = 0;	// reset the counter

	$('#table_'+id).remove();	// remove it from the cart
	update_total();	// update the total price counter on the page
}

function change(id)	// evoked when we change the number of products via the select area
{
	var i=findpos(id);

	totalprice+=(parseInt($('#'+id+'_cnt').val())-purchased[i].cnt)*purchased[i].price;

	purchased[i].cnt=parseInt($('#'+id+'_cnt').val());
	update_total();
}

function update_total()	// function that updates the total price div on the page
{
	if(totalprice)
	{
		$('#total').html('total: $'+totalprice);	// if we've bought somehitng, show the total price div and the purchase button
		$('a.button').css('display','block');
	}
	else	// hide them
	{
		$('#total').html('');
		$('a.button').hide();
	}
}</pre>
<p>There are a few places in this code, where we use an <strong>id</strong> for pointing to a product. The <strong>id</strong> is a unique identifier, that is assigned by the MySQL database once we insert a new item.<br />
It is passed by the AJAX requests and we need to translate it to the index position of our products array in order to use it, which is the purpose of the <strong>findpos()</strong> function.</p>
<p>With this our shopping cart is complete!</p>
<h3>Conclusion</h3>
<p>Today we made a functional AJAX driven shopping cart. You are free to download the code and modify it any way you wish. You can build upon it and even turn it into a full fledged online shop.</p>
<div><table border=0 bgcolor=#ffffff> <td><iframe src='http://digg.com/api/diggthis.php?w=new&amp;u=http%3A%2F%2Ftutorialzine.com%2F2009%2F09%2Fshopping-cart-php-jquery%2F&amp;t=An+AJAX+Based+Shopping+Cart+with+PHP%2C+CSS+%26+jQuery&amp;s=normal' height='80' width='52' frameborder='0' scrolling='no'></iframe></td> <td><iframe src='http://www.reddit.com/button_content?newwindow=1&amp;url=http%3A%2F%2Ftutorialzine.com%2F2009%2F09%2Fshopping-cart-php-jquery%2F&amp;title=An+AJAX+Based+Shopping+Cart+with+PHP%2C+CSS+%26+jQuery&amp;t=2 ' height='80' width='52' scrolling='no' frameborder='0' ></iframe></td> <td><iframe src='http://widgets.dzone.com/links/widgets/zoneit.html?url=http%3A%2F%2Ftutorialzine.com%2F2009%2F09%2Fshopping-cart-php-jquery%2F&amp;title=An+AJAX+Based+Shopping+Cart+with+PHP%2C+CSS+%26+jQuery&amp;t=1 ' height='80' width='52' scrolling='no' frameborder='0' ></iframe></td> <td><iframe src='http://api.tweetmeme.com/button.js?url=http%3A%2F%2Ftutorialzine.com%2F2009%2F09%2Fshopping-cart-php-jquery%2F&amp;source=Tutorialzine&amp;style=normal ' height='61' width='50' frameborder='0' scrolling='no'></iframe></td> <td><script type="text/javascript"> var fbShare = {url: 'http://tutorialzine.com/2009/09/shopping-cart-php-jquery/',size:'large'}</script><script type="text/javascript" src="http://widgets.fbshare.me/files/fbshare.js"></script></td></table></div><!-- Generated by Digg Digg plugin, 
    Author : Yong Mook Kim
    Website : http://www.mkyong.com/blog/digg-digg-wordpress-plugin/
	--><img src="http://feeds.feedburner.com/~r/Tutorialzine/~4/E8bghO7Ys_o" height="1" width="1"/>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:36:"http://wellformedweb.org/CommentAPI/";a:1:{s:10:"commentRss";a:1:{i:0;a:5:{s:4:"data";s:62:"http://tutorialzine.com/2009/09/shopping-cart-php-jquery/feed/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:38:"http://purl.org/rss/1.0/modules/slash/";a:1:{s:8:"comments";a:1:{i:0;a:5:{s:4:"data";s:2:"47";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:42:"http://rssnamespace.org/feedburner/ext/1.0";a:1:{s:8:"origLink";a:1:{i:0;a:5:{s:4:"data";s:57:"http://tutorialzine.com/2009/09/shopping-cart-php-jquery/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}}}i:8;a:6:{s:4:"data";s:44:"
		
		
		
		
		
				
		

		
		
			
			
		
		";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";s:5:"child";a:6:{s:0:"";a:7:{s:5:"title";a:1:{i:0;a:5:{s:4:"data";s:37:"A Stylish Navigation Menu With jQuery";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"link";a:1:{i:0;a:5:{s:4:"data";s:59:"http://feedproxy.google.com/~r/Tutorialzine/~3/xlNgiCrT4J8/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"comments";a:1:{i:0;a:5:{s:4:"data";s:72:"http://tutorialzine.com/2009/09/stylish-navigation-menu-jquery/#comments";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:7:"pubDate";a:1:{i:0;a:5:{s:4:"data";s:31:"Mon, 14 Sep 2009 19:51:28 +0000";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"category";a:2:{i:0;a:5:{s:4:"data";s:3:"CSS";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:1;a:5:{s:4:"data";s:6:"jQuery";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"guid";a:1:{i:0;a:5:{s:4:"data";s:30:"http://tutorialzine.com/?p=386";s:7:"attribs";a:1:{s:0:"";a:1:{s:11:"isPermaLink";s:5:"false";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:11:"description";a:1:{i:0;a:5:{s:4:"data";s:112:"In this tutorial we are going to make a stylish CSS + XHTML navigation menu with the help of the jQuery library.";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:32:"http://purl.org/dc/elements/1.1/";a:1:{s:7:"creator";a:1:{i:0;a:5:{s:4:"data";s:6:"Martin";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:40:"http://purl.org/rss/1.0/modules/content/";a:1:{s:7:"encoded";a:1:{i:0;a:5:{s:4:"data";s:8119:"<h3>Introduction</h3>
<p>As you may know, the first 20 seconds of a new visitor&#8217;s interaction with a website determine whether they are going to stay or leave. This means you have to follow common design practices and put everything where the user would expect it to be. A crucial part of this process is developing an easy to use navigation menu.</p>
<p>In this tutorial we are going to make a stylish CSS + XHTML navigation menu with the help of the jQuery library.</p>
<p>So <strong>download the tutorial files</strong> above and keep on reading..</p>
<h3>Step 1 &#8211; the XHTML</h3>
<p>The XHTML code is simple and search engine friendly.</p>
<h4>index.html</h4>
<pre class="brush:html">&lt;div id="menu-container"&gt;
&lt;ul id="navigationMenu"&gt;
&lt;li&gt;&lt;a href="#" class="normalMenu"&gt;Home&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#" class="normalMenu"&gt;Services&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#" class="selectedMenu"&gt;Our clients&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#" class="normalMenu"&gt;The team&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#" class="normalMenu"&gt;About us&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#" class="normalMenu"&gt;Contact us&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;</pre>
<p>The entire navigation menu is basically one unordered list. You can introduce new menu items by just adding more LI elements and setting their respective text and target URLs.</p>
<p>An important thing to note here is how you can mark a menu item as selected by default (or active) &#8211; just assign it the <strong>selectedMenu</strong> class (line 5). For example, here we are highlighting the &#8220;Our clients&#8221; page. You can set it up manually for a static site, or use PHP to do ti dynamically.</p>
<div id="attachment_388" class="wp-caption alignnone" style="width: 610px"><img class="size-full wp-image-388 " title="The navigation menu explained" src="http://tutorialzine.com/wp-content/uploads/2009/09/i11.png" alt="The navigation menu explained" width="600" height="230" /><p class="wp-caption-text">The navigation menu explained</p></div>
<h3>Step 2 &#8211; jQuery</h3>
<p>As you can see from the illustration above, we are going to clone the set of links defined in our XHTML (the dark ones) and assign them the <strong>hoverMenu</strong> CSS class, which floats them above the default ones.</p>
<p>This strategy has many advantages &#8211; firstly it keeps the XHTML cleaner, because you do not have to add those links manually to the page, and secondly it guarantees that you will have clean and working navigation regardless of the visitor&#8217;s javascript support &#8211; great for both usability and SEO.</p>
<p>Now lets see what happens in our <strong>script.js</strong>.</p>
<h4>script.js</h4>
<pre class="brush:js">$(document).ready(function(){
// executed after the page has finished loading

	$('#navigationMenu li .normalMenu').each(function(){	// for each menu item

		// create a duplicate hyperlink and position it above the current one
		$(this).before($(this).clone().removeClass().addClass('hoverMenu'));

	});

	$('#navigationMenu li').hover(function(){	// using the hover method..

		// we assign an action on mouse over
		$(this).find('.hoverMenu').stop().animate({marginTop:'0px'},200);
		// the animate method provides countless possibilities

	},

	function(){
		// and an action on mouse out
		$(this).find('.hoverMenu').stop().animate({marginTop:'-25px'},200);

	});

});</pre>
<p>Great, but what have we just done? First we used the <strong>$(&#8217;document&#8217;).ready</strong> method to insure that the code is executed after the page has finished loading.</p>
<p>Then we looped through all the links and cloned them, assigning a new CSS class  &#8211; <strong>hoverMenu</strong>.</p>
<p>After this we used the <strong>hover()</strong> method to easily add event handlers for both the mouseover and the mouseout event.</p>
<p>Later we used the animate method &#8211; a really powerful tool in the jQuery arsenal. In this case we provided it with a new <strong>marginTop</strong> value and the duration of the effect. jQuery will handle all the animation.</p>
<p>Note the use of the <strong>stop()</strong> method &#8211; it stops all currently active animations and thus prevents the stacking of different animation effects on top of each other guaranteeing a smooth user experience.</p>
<h3>Step 3 &#8211; the CSS</h3>
<p>Lets take a look at our CSS style sheet.</p>
<h4>demo.css</h4>
<pre class="brush:css">/* Page styles */

body,h1,h2,h3,p,td,quote,small,form,input,ul,li,ol,label{	/* resetting some elements for better browser compatibility */
	margin:0px;
	padding:0px;
}

body{	/* styling the body */
	margin-top:20px;
	font-family:Arial, Helvetica, sans-serif;
	color:#51555C;
	height:100%;
	font-size:12px;
}

/* Navigation menu styles */

ul{	/* the unordered list */
	height:25px;
	font-family:Arial, Helvetica, sans-serif;
	font-size:12px;
}

ul li{
	border:1px solid #444444;
	display:inline-block;	/* changing the display property */
	float:left;	/* floating the list items to the left */
	height:25px;
	list-style-type:none;	/* disabling the list icon */
	overflow:hidden;	/* hiding the overflowing content */
}

ul li a, ul li a:hover,
ul li a:visited{
	text-decoration:none;	/* removing the underline text-decoration */
}

/* styling the links */
.normalMenu, .normalMenu:visited,
.hoverMenu, .hoverMenu:visited,
.selectedMenu,.selectedMenu:visited {/* these properties are shared between the classes */
	outline:none;
	padding:5px 10px;
	display:block;
}

/* styles that are assigned individually */

.hoverMenu,.hoverMenu:visited,
.selectedMenu,.selectedMenu:visited {
	margin-top:-25px;
	background:url(img/grey_bg.gif) repeat-x #eeeeee;
	color:#444444;
}

.selectedMenu,.selectedMenu:visited {
	margin:0;
}

.normalMenu, .normalMenu:visited{
	color:white;
	background:url(img/dark_bg.gif) repeat-x #444444;
}</pre>
<p>As you can see, we have three main classes that define the looks of our navigation menu. <strong>normalMenu</strong> &#8211; for the normal state of the navigation links, <strong>hoverMenu</strong> &#8211; lighter link that slides down on hover, <strong>selectedMenu</strong> the active (selected) state.</p>
<p>With this our stylish navigation menu is complete!</p>
<h3>Conclusion</h3>
<p>In this tutorial I showed you how to create a stylish and user friendly navigation menu. You are free to use it in your sites and modify it in whatever fashion you find appropriate.</p>
<div><table border=0 bgcolor=#ffffff> <td><iframe src='http://digg.com/api/diggthis.php?w=new&amp;u=http%3A%2F%2Ftutorialzine.com%2F2009%2F09%2Fstylish-navigation-menu-jquery%2F&amp;t=A+Stylish+Navigation+Menu+With+jQuery&amp;s=normal' height='80' width='52' frameborder='0' scrolling='no'></iframe></td> <td><iframe src='http://www.reddit.com/button_content?newwindow=1&amp;url=http%3A%2F%2Ftutorialzine.com%2F2009%2F09%2Fstylish-navigation-menu-jquery%2F&amp;title=A+Stylish+Navigation+Menu+With+jQuery&amp;t=2 ' height='80' width='52' scrolling='no' frameborder='0' ></iframe></td> <td><iframe src='http://widgets.dzone.com/links/widgets/zoneit.html?url=http%3A%2F%2Ftutorialzine.com%2F2009%2F09%2Fstylish-navigation-menu-jquery%2F&amp;title=A+Stylish+Navigation+Menu+With+jQuery&amp;t=1 ' height='80' width='52' scrolling='no' frameborder='0' ></iframe></td> <td><iframe src='http://api.tweetmeme.com/button.js?url=http%3A%2F%2Ftutorialzine.com%2F2009%2F09%2Fstylish-navigation-menu-jquery%2F&amp;source=Tutorialzine&amp;style=normal ' height='61' width='50' frameborder='0' scrolling='no'></iframe></td> <td><script type="text/javascript"> var fbShare = {url: 'http://tutorialzine.com/2009/09/stylish-navigation-menu-jquery/',size:'large'}</script><script type="text/javascript" src="http://widgets.fbshare.me/files/fbshare.js"></script></td></table></div><!-- Generated by Digg Digg plugin, 
    Author : Yong Mook Kim
    Website : http://www.mkyong.com/blog/digg-digg-wordpress-plugin/
	--><img src="http://feeds.feedburner.com/~r/Tutorialzine/~4/xlNgiCrT4J8" height="1" width="1"/>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:36:"http://wellformedweb.org/CommentAPI/";a:1:{s:10:"commentRss";a:1:{i:0;a:5:{s:4:"data";s:68:"http://tutorialzine.com/2009/09/stylish-navigation-menu-jquery/feed/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:38:"http://purl.org/rss/1.0/modules/slash/";a:1:{s:8:"comments";a:1:{i:0;a:5:{s:4:"data";s:2:"10";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:42:"http://rssnamespace.org/feedburner/ext/1.0";a:1:{s:8:"origLink";a:1:{i:0;a:5:{s:4:"data";s:63:"http://tutorialzine.com/2009/09/stylish-navigation-menu-jquery/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}}}i:9;a:6:{s:4:"data";s:47:"
		
		
		
		
		
				
		
		

		
		
			
			
		
		";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";s:5:"child";a:6:{s:0:"";a:7:{s:5:"title";a:1:{i:0;a:5:{s:4:"data";s:35:"Making a Really Cool jQuery Gallery";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"link";a:1:{i:0;a:5:{s:4:"data";s:59:"http://feedproxy.google.com/~r/Tutorialzine/~3/74uzVQ_wZ7E/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"comments";a:1:{i:0;a:5:{s:4:"data";s:61:"http://tutorialzine.com/2009/09/cool-jquery-gallery/#comments";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:7:"pubDate";a:1:{i:0;a:5:{s:4:"data";s:31:"Thu, 10 Sep 2009 08:21:02 +0000";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"category";a:3:{i:0;a:5:{s:4:"data";s:3:"CSS";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:1;a:5:{s:4:"data";s:3:"PHP";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:2;a:5:{s:4:"data";s:6:"jQuery";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"guid";a:1:{i:0;a:5:{s:4:"data";s:30:"http://tutorialzine.com/?p=366";s:7:"attribs";a:1:{s:0:"";a:1:{s:11:"isPermaLink";s:5:"false";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:11:"description";a:1:{i:0;a:5:{s:4:"data";s:172:"In this tutorial we are going to build a custom gallery that scans a folder of images and outputs a cool image gallery, utilizing PHP, CSS, jQuery and the lightBox plug-in.";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:32:"http://purl.org/dc/elements/1.1/";a:1:{s:7:"creator";a:1:{i:0;a:5:{s:4:"data";s:6:"Martin";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:40:"http://purl.org/rss/1.0/modules/content/";a:1:{s:7:"encoded";a:1:{i:0;a:5:{s:4:"data";s:10731:"<h3>Introduction</h3>
<p>One of the main benefits of using a popular java script library, such as jQuery, is the incredible number of available plug-ins that will kick-start any development project.</p>
<p>Today we are going to build a custom gallery that scans a folder of images and outputs a slick gallery, utilizing PHP, CSS, jQuery and the <a href="http://leandrovieira.com/projects/jquery/lightbox/" target="_blank">jQuery Lightbox plug-in</a>.</p>
<p>There is no need to download the plug-in &#8211; I&#8217;ve included it in the demo files, so <strong>grab them</strong> and get on reading.</p>
<h3>The XHTML</h3>
<p>We start off with our XHTML front-end.</p>
<h4>demo.php</h4>
<pre class="brush:html;highlight:[8,9,10]">&lt;div id="container"&gt;

&lt;div id="heading"&gt; &lt;!-- the heading --&gt;
&lt;h1&gt;A cool jQuery gallery&lt;/h1&gt;
&lt;/div&gt;
&lt;div id="gallery"&gt; &lt;!-- this is the containing div for the images --&gt;

&lt;?php
//our php code goes here
?&gt;

&lt;div class="clear"&gt;&lt;/div&gt; &lt;!-- using clearfix --&gt;
&lt;/div&gt;

&lt;div id="footer"&gt; &lt;!-- some tutorial info --&gt;
&lt;/div&gt;

&lt;/div&gt; &lt;!-- closing the container div --&gt;</pre>
<p>And that is basically all there is to it. Note the highlighted area &#8211; this is where we put our PHP code, that will generate the gallery images. Now lets go through how this is done.</p>
<h3>The PHP</h3>
<p>The idea is simple &#8211; our PHP back-end is going to scan a folder that we&#8217;ve set up with our gallery images, and turn it into a fancy CSS &amp; jQuery gallery. The great thing about this strategy is that it is incredibly easy to set up a gallery, and adding images to an existing one is a charm &#8211; just dump them in the gallery&#8217;s directory via FTP and it is ready to go.</p>
<h4>demo.php</h4>
<pre class="brush:php">$directory = 'gallery';	//where the gallery images are located

$allowed_types=array('jpg','jpeg','gif','png');	//allowed image types

$file_parts=array();
$ext='';
$title='';
$i=0;

//try to open the directory
$dir_handle = @opendir($directory) or die("There is an error with your image directory!");

while ($file = readdir($dir_handle))	//traverse through the files
{
	if($file=='.' || $file == '..') continue;	//skip links to the current and parent directories

	$file_parts = explode('.',$file);	//split the file name and put each part in an array
	$ext = strtolower(array_pop($file_parts));	//the last element is the extension

	$title = implode('.',$file_parts);	//once the extension has been popped out, all that is left is the file name
	$title = htmlspecialchars($title);	//make the filename html-safe to prevent potential security issues

	$nomargin='';
	if(in_array($ext,$allowed_types))	//if the extension is an allowable type
	{
		if(($i+1)%4==0) $nomargin='nomargin';	//the last image on the row is assigned the CSS class "nomargin"
		echo '
		&lt;div class="pic '.$nomargin.'" style="background:url('.$directory.'/'.$file.') no-repeat 50% 50%;"&gt;
		&lt;a href="'.$directory.'/'.$file.'" title="'.$title.'" target="_blank"&gt;'.$title.'&lt;/a&gt;
		&lt;/div&gt;';

		$i++;	//increment the image counter
	}
}

closedir($dir_handle);	//close the directory</pre>
<p>By traversing through the files in the directory and skipping the non-image files, we output some XHTML code for every image . This code (lines 28-39) consists of a div container, with a CSS class <strong>pic</strong> (and in some cases a <strong>nomargin</strong>, more on that later), and we set its <strong>background</strong> to the image file via the <strong>style</strong> attribute. We position the image in the center of the background by specifying its position to be <strong>50% 50%</strong>. This centers it both horizontally and vertically and thus shows  only the middle part, that fits into the div container&#8217;s size. This creates a nice thumbnail, with no need of actually resizing the image.</p>
<p>This works best with images with smaller resolutions, so you should consider resizing those 10 megapixel photos before uploading them.</p>
<p>The div contains a hyperlink which is linked to the image and has a <strong>title</strong> of the image filename. Both these attributes are used by the <strong>lightBox</strong> plugin to generate the lightbox gallery. So by renaming the file, you can change the caption that shows under it.</p>
<p>You may wonder what is the point of that <strong>nomargin</strong> class? Every image in the gallery has a right and a bottom margin. But this means that it is not possible the last element of each row to align with the right part of the heading div and it looks amateurish. So we assign this special class, which clears the right margin for the last element on each row and gives us a proper alignment.</p>
<div id="attachment_375" class="wp-caption alignnone" style="width: 610px"><img class="size-full wp-image-375  " title="The jQuery Gallery" src="http://tutorialzine.com/wp-content/uploads/2009/09/i13.jpg" alt="The jQuery Gallery" width="600" height="460" /><p class="wp-caption-text">The jQuery Gallery</p></div>
<h3>The CSS</h3>
<p>Everything is set up, but we still have to give it that cool look.</p>
<h4>demo.css</h4>
<pre class="brush:css">/* first reset some of the elements for browser compatibility */
body,h1,h2,h3,p,td,quote,small,form,input,ul,li,ol,label{
	margin:0px;
	padding:0px;
	font-family:Arial, Helvetica, sans-serif;
}

body{	/* style the body */
	margin-top:20px;
	color:white;
	font-size:13px;
	background-color:#222222;
}

.clear{	/* the clearfix class */
	clear:both;
}

a, a:visited {	/* a:visited is needed so it works properly in IE6 */
	color:#00BBFF;
	text-decoration:none;
	outline:none;
}

a:hover{	/* the hover effect */
	text-decoration:underline;
}

#container{	/* the main container div */
	width:890px;
	margin:20px auto;
}

#heading,#footer{	/* the header and the footer share some of their style rules */
	background-color:#2A2A2A;
	border:1px solid #444444;
	height:20px;
	padding:6px 0 25px 15px;
	margin-bottom:30px;
	overflow:hidden;
}

#footer{	/* ..but not all */
	height:10px;
	margin:20px 0 20px 0;
	padding:6px 0 11px 15px;
}

div.nomargin{	/* our special nomargin class */
	margin-right:0px;
}

.pic{	/* divs that hold all the pictures in the gallery */
	float:left;
	margin:0 15px 15px 0;
	border:5px solid white;
	width:200px;
	height:250px;
}

.pic a{	/* in every .pic container there is a hyperlink exactly the size of the container */
	width:200px;
	height:250px;
	text-indent:-99999px;
	display:block;	/* don't forget that widths and heights of hyperlinks are useless without display:block */
}

h1{	/* style the heading */
	font-size:28px;
	font-weight:bold;
	font-family:"Trebuchet MS",Arial, Helvetica, sans-serif;
}

h2{	/* the footer text */
	font-weight:normal;
	font-size:14px;
	color:white;
}</pre>
<h3>The jQuery</h3>
<p>To make it all tick, we need to include the <strong>jQuery</strong> java script library in our page, and add the <strong>lightBox</strong> plugin. The following code was taken from the head section of <strong>demo.php</strong>:</p>
<pre class="brush:html">&lt;link rel="stylesheet" type="text/css" href="lightbox/css/jquery.lightbox-0.5.css"&gt;
&lt;link rel="stylesheet" type="text/css" href="demo.css" /&gt;

&lt;script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="lightbox/js/jquery.lightbox-0.5.pack.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="script.js"&gt;&lt;/script&gt;</pre>
<p>On line 1 we include the <strong>lightbox</strong> plugin&#8217;s CSS file, which styles the lightbox that displays the images. On line 2 we include our own CSS file.</p>
<p>Line 4 is where we include the jQuery library from Google&#8217;s CDN. Later come the lightbox plugin itself and our own <strong>script.js</strong> file.</p>
<p>Now we are ready to put the finishing touch.</p>
<h4>script.js</h4>
<pre class="brush:js">// after the page has finished loading
$(document).ready(function(){

	$('.pic a').lightBox({
	// we call the lightbox method, and convert all the hyperlinks in the .pic container into a lightbox gallery

		imageLoading: 'lightbox/images/loading.gif',
		imageBtnClose: 'lightbox/images/close.gif',
		imageBtnPrev: 'lightbox/images/prev.gif',
		imageBtnNext: 'lightbox/images/next.gif'

	});

});</pre>
<p>The <strong>lighbox()</strong> method takes an object as an optional parameter. The only reason we provide any parameters is that I changed the default location of the plugin, putting it in a subfolder <strong>/lightbox</strong> which aids for a cleaner file structure. Unfortunately the images that the plug-in uses become inaccessible and have to be provided manually.</p>
<p>With this our gallery is complete.</p>
<h3>Conclusion</h3>
<p>In this tutorial you learned how to create a stylish image gallery with the help of the jQuery lightBox plug-in. You can use the example code into your projects and you are free to modify it in whatever manner you find appropriate. You can as well use it as is and add a gallery to your site with minimum modifications needed.</p>
<div><table border=0 bgcolor=#ffffff> <td><iframe src='http://digg.com/api/diggthis.php?w=new&amp;u=http%3A%2F%2Ftutorialzine.com%2F2009%2F09%2Fcool-jquery-gallery%2F&amp;t=Making+a+Really+Cool+jQuery+Gallery&amp;s=normal' height='80' width='52' frameborder='0' scrolling='no'></iframe></td> <td><iframe src='http://www.reddit.com/button_content?newwindow=1&amp;url=http%3A%2F%2Ftutorialzine.com%2F2009%2F09%2Fcool-jquery-gallery%2F&amp;title=Making+a+Really+Cool+jQuery+Gallery&amp;t=2 ' height='80' width='52' scrolling='no' frameborder='0' ></iframe></td> <td><iframe src='http://widgets.dzone.com/links/widgets/zoneit.html?url=http%3A%2F%2Ftutorialzine.com%2F2009%2F09%2Fcool-jquery-gallery%2F&amp;title=Making+a+Really+Cool+jQuery+Gallery&amp;t=1 ' height='80' width='52' scrolling='no' frameborder='0' ></iframe></td> <td><iframe src='http://api.tweetmeme.com/button.js?url=http%3A%2F%2Ftutorialzine.com%2F2009%2F09%2Fcool-jquery-gallery%2F&amp;source=Tutorialzine&amp;style=normal ' height='61' width='50' frameborder='0' scrolling='no'></iframe></td> <td><script type="text/javascript"> var fbShare = {url: 'http://tutorialzine.com/2009/09/cool-jquery-gallery/',size:'large'}</script><script type="text/javascript" src="http://widgets.fbshare.me/files/fbshare.js"></script></td></table></div><!-- Generated by Digg Digg plugin, 
    Author : Yong Mook Kim
    Website : http://www.mkyong.com/blog/digg-digg-wordpress-plugin/
	--><img src="http://feeds.feedburner.com/~r/Tutorialzine/~4/74uzVQ_wZ7E" height="1" width="1"/>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:36:"http://wellformedweb.org/CommentAPI/";a:1:{s:10:"commentRss";a:1:{i:0;a:5:{s:4:"data";s:57:"http://tutorialzine.com/2009/09/cool-jquery-gallery/feed/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:38:"http://purl.org/rss/1.0/modules/slash/";a:1:{s:8:"comments";a:1:{i:0;a:5:{s:4:"data";s:2:"28";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:42:"http://rssnamespace.org/feedburner/ext/1.0";a:1:{s:8:"origLink";a:1:{i:0;a:5:{s:4:"data";s:52:"http://tutorialzine.com/2009/09/cool-jquery-gallery/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}}}}}s:44:"http://purl.org/rss/1.0/modules/syndication/";a:2:{s:12:"updatePeriod";a:1:{i:0;a:5:{s:4:"data";s:6:"hourly";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:15:"updateFrequency";a:1:{i:0;a:5:{s:4:"data";s:1:"1";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:27:"http://www.w3.org/2005/Atom";a:1:{s:4:"link";a:2:{i:0;a:5:{s:4:"data";s:0:"";s:7:"attribs";a:1:{s:0:"";a:3:{s:3:"rel";s:4:"self";s:4:"href";s:40:"http://feeds.feedburner.com/Tutorialzine";s:4:"type";s:19:"application/rss+xml";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:1;a:5:{s:4:"data";s:0:"";s:7:"attribs";a:1:{s:0:"";a:2:{s:3:"rel";s:3:"hub";s:4:"href";s:31:"http://pubsubhubbub.appspot.com";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:42:"http://rssnamespace.org/feedburner/ext/1.0";a:2:{s:14:"emailServiceId";a:1:{i:0;a:5:{s:4:"data";s:12:"Tutorialzine";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:18:"feedburnerHostname";a:1:{i:0;a:5:{s:4:"data";s:28:"http://feedburner.google.com";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}}}}}}}}}}s:4:"type";i:128;s:7:"headers";a:10:{s:13:"last-modified";s:29:"Sun, 08 Nov 2009 23:00:43 GMT";s:4:"etag";s:27:"Q4HOqs9HpRKZTx33fGW4EybMxJE";s:12:"content-type";s:23:"text/xml; charset=UTF-8";s:17:"transfer-encoding";s:7:"chunked";s:4:"date";s:29:"Sun, 08 Nov 2009 23:00:43 GMT";s:7:"expires";s:29:"Sun, 08 Nov 2009 23:00:43 GMT";s:13:"cache-control";s:18:"private, max-age=0";s:22:"x-content-type-options";s:7:"nosniff";s:16:"x-xss-protection";s:1:"0";s:6:"server";s:7:"GFE/2.0";}s:5:"build";s:14:"20090627192103";}